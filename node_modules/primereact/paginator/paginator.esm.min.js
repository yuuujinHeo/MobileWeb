import*as e from"react";import{PrimeReactContext as t,ariaLabel as n,localeOption as a}from"primereact/api";import{ComponentBase as r,useHandleStyle as o}from"primereact/componentbase";import{useUpdateEffect as l}from"primereact/hooks";import{classNames as i,mergeProps as p,ObjectUtils as s,IconUtils as c}from"primereact/utils";import{AngleDoubleLeftIcon as u}from"primereact/icons/angledoubleleft";import{Ripple as g}from"primereact/ripple";import{InputNumber as m}from"primereact/inputnumber";import{AngleDoubleRightIcon as d}from"primereact/icons/angledoubleright";import{AngleRightIcon as f}from"primereact/icons/angleright";import{AngleLeftIcon as b}from"primereact/icons/angleleft";import{Dropdown as P}from"primereact/dropdown";function y(e){if(Array.isArray(e))return e}function v(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,l,i=[],p=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;p=!1}else for(;!(p=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);p=!0);}catch(e){s=!0,r=e}finally{try{if(!p&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw r}}return i}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function O(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function j(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==w(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function C(e){var t=j(e,"string");return"symbol"===w(t)?t:String(t)}function E(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=r.extend({defaultProps:{__TYPE:"Paginator",__parentMetadata:null,totalRecords:0,rows:0,first:0,pageLinkSize:5,rowsPerPageOptions:null,alwaysShow:!0,style:null,className:null,template:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",onPageChange:null,leftContent:null,rightContent:null,dropdownAppendTo:null,currentPageReportTemplate:"({currentPage} of {totalPages})",children:void 0},css:{classes:{root:"p-paginator p-component",left:"p-paginator-left-content",end:"p-paginator-right-content",firstPageIcon:"p-paginator-icon",firstPageButton:function(e){return i("p-paginator-first p-paginator-element p-link",{"p-disabled":e.disabled})},prevPageIcon:"p-paginator-icon",prevPageButton:function(e){return i("p-paginator-prev p-paginator-element p-link",{"p-disabled":e.disabled})},nextPageIcon:"p-paginator-icon",nextPageButton:function(e){return i("p-paginator-next p-paginator-element p-link",{"p-disabled":e.disabled})},lastPageIcon:"p-paginator-icon",lastPageButton:function(e){return i("p-paginator-last p-paginator-element p-link",{"p-disabled":e.disabled})},pageButton:function(e){var t=e.pageLink;return i("p-paginator-page p-paginator-element p-link",{"p-paginator-page-start":t===e.startPageInView,"p-paginator-page-end":t===e.endPageInView,"p-highlight":t-1===e.page})},pages:"p-paginator-pages"},styles:"\n@layer primereact {\n    .p-paginator {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        flex-wrap: wrap;\n    }\n    \n    .p-paginator-left-content {\n        margin-right: auto;\n    }\n    \n    .p-paginator-right-content {\n        margin-left: auto;\n    }\n    \n    .p-paginator-page,\n    .p-paginator-next,\n    .p-paginator-last,\n    .p-paginator-first,\n    .p-paginator-prev,\n    .p-paginator-current {\n        cursor: pointer;\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        line-height: 1;\n        user-select: none;\n        overflow: hidden;\n        position: relative;\n    }\n    \n    .p-paginator-element:focus {\n        z-index: 1;\n        position: relative;\n    }\n}\n"}}),x=r.extend({defaultProps:{__TYPE:"CurrentPageReport",pageCount:null,page:null,first:null,rows:null,totalRecords:null,reportTemplate:"({currentPage} of {totalPages})",template:null,children:void 0}}),L=r.extend({defaultProps:{__TYPE:"FirstPageLink",disabled:!1,onClick:null,template:null,firstPageLinkIcon:null,children:void 0}}),I=r.extend({defaultProps:{__TYPE:"JumpToPageInput",page:null,rows:null,pageCount:null,disabled:!1,template:null,onChange:null,children:void 0,metaData:null,ptm:null}}),S=r.extend({defaultProps:{__TYPE:"LastPageLink",disabled:!1,onClick:null,template:null,lastPageLinkIcon:null,children:void 0}}),D=r.extend({defaultProps:{__TYPE:"NextPageLink",disabled:!1,onClick:null,template:null,nextPageLinkIcon:null,children:void 0}}),R=r.extend({defaultProps:{__TYPE:"PageLinks",value:null,page:null,rows:null,pageCount:null,links:null,template:null,children:void 0}}),T=r.extend({defaultProps:{__TYPE:"PrevPageLink",disabled:!1,onClick:null,template:null,prevPageLinkIcon:null,children:void 0}}),_=r.extend({defaultProps:{__TYPE:"RowsPerPageDropdown",options:null,value:null,page:null,pageCount:null,totalRecords:0,appendTo:null,onChange:null,template:null,disabled:!1,children:void 0}});function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=e.memo((function(n){var a=e.useContext(t),r=x.getProps(n,a),o={currentPage:r.page+1,totalPages:r.pageCount,first:Math.min(r.first+1,r.totalRecords),last:Math.min(r.first+r.rows,r.totalRecords),rows:r.rows,totalRecords:r.totalRecords},l=r.reportTemplate.replace("{currentPage}",o.currentPage).replace("{totalPages}",o.totalPages).replace("{first}",o.first).replace("{last}",o.last).replace("{rows}",o.rows).replace("{totalRecords}",o.totalRecords),i=p({className:"p-paginator-current"},r.ptm("current",{hostName:r.hostName})),c=e.createElement("span",i,l);if(r.template){var u=M(M({},o),{className:"p-paginator-current",element:c,props:r});return s.getJSXElement(r.template,u)}return c}));function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}B.displayName="CurrentPageReport";var A=e.memo((function(a){var r=e.useContext(t),o=L.getProps(a,r),l=o.ptm,m=o.cx,d=function(e){return l(e,{hostName:o.hostName,context:{disabled:o.disabled}})},f=i("p-paginator-first p-paginator-element p-link",{"p-disabled":o.disabled}),b=p({className:m("firstPageIcon")},d("firstPageIcon")),P=c.getJSXIcon(o.firstPageLinkIcon||e.createElement(u,b),Y({},b),{props:o}),y=p({type:"button",className:m("firstPageButton",{disabled:o.disabled}),onClick:o.onClick,disabled:o.disabled,"aria-label":n("firstPageLabel")},d("firstPageButton")),v=e.createElement("button",y,P,e.createElement(g,null));return o.template?s.getJSXElement(o.template,{onClick:o.onClick,className:f,iconClassName:"p-paginator-icon",disabled:o.disabled,element:v,props:o}):v}));A.displayName="FirstPageLink";var F=e.memo((function(n){var a=e.useContext(t),r=I.getProps(n,a),o=function(e){r.onChange&&r.onChange(r.rows*(e.value-1),r.rows)},l=r.pageCount>0?r.page+1:0,i=e.createElement(m,{value:l,onChange:o,className:"p-paginator-page-input",disabled:r.disabled,pt:r.ptm("JTPInput"),unstyled:r.unstyled,__parentMetadata:{parent:r.metaData}});return r.template?s.getJSXElement(r.template,{value:l,onChange:o,disabled:r.disabled,className:"p-paginator-page-input",element:i,props:r}):i}));function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}F.displayName="JumpToPageInput";var U=e.memo((function(a){var r=e.useContext(t),o=S.getProps(a,r),l=o.ptm,u=o.cx,m=function(e){return l(e,{hostName:o.hostName,context:{disabled:o.disabled}})},f=i("p-paginator-last p-paginator-element p-link",{"p-disabled":o.disabled}),b=p({className:u("lastPageIcon")},m("lastPageIcon")),P=c.getJSXIcon(o.lastPageLinkIcon||e.createElement(d,b),V({},b),{props:o}),y=p({type:"button",className:u("lastPageButton",{disabled:o.disabled}),onClick:o.onClick,disabled:o.disabled,"aria-label":n("lastPageLabel")},m("lastPageButton")),v=e.createElement("button",y,P,e.createElement(g,null));return o.template?s.getJSXElement(o.template,{onClick:o.onClick,className:f,iconClassName:"p-paginator-icon",disabled:o.disabled,element:v,props:o}):v}));function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}U.displayName="LastPageLink";var q=e.memo((function(a){var r=e.useContext(t),o=D.getProps(a,r),l=o.ptm,u=o.cx,m=function(e){return l(e,{hostName:o.hostName,context:{disabled:o.disabled}})},d=i("p-paginator-next p-paginator-element p-link",{"p-disabled":o.disabled}),b=p({className:u("nextPageIcon")},m("nextPageIcon")),P=c.getJSXIcon(o.nextPageLinkIcon||e.createElement(f,b),$({},b),{props:o}),y=p({type:"button",className:u("nextPageButton",{disabled:o.disabled}),onClick:o.onClick,disabled:o.disabled,"aria-label":n("nextPageLabel")},m("nextPageButton")),v=e.createElement("button",y,P,e.createElement(g,null));return o.template?s.getJSXElement(o.template,{onClick:o.onClick,className:d,iconClassName:"p-paginator-icon",disabled:o.disabled,element:v,nextPageLinkIcon:P,props:o}):v}));q.displayName="NextPageLink";var G=e.memo((function(a){var r,o=e.useContext(t),l=R.getProps(a,o),c=l.ptm,u=l.cx,m=function(e,t){return c(t,{hostName:l.hostName,context:{active:e-1===l.page}})},d=function(e,t){l.onClick&&l.onClick({originalEvent:e,value:t}),e.preventDefault()};if(l.value){var f=l.value[0],b=l.value[l.value.length-1];r=l.value.map((function(t){var a=i("p-paginator-page p-paginator-element p-link",{"p-paginator-page-start":t===f,"p-paginator-page-end":t===b,"p-highlight":t-1===l.page}),r=p({type:"button",onClick:function(e){return d(e,t)},className:u("pageButton",{pageLink:t,startPageInView:f,endPageInView:b,page:l.page}),disabled:l.disabled,"aria-label":n("pageLabel",{page:t})},m(t,"pageButton")),o=e.createElement("button",r,t,e.createElement(g,null));l.template&&(o=s.getJSXElement(l.template,{onClick:function(e){return d(e,t)},className:a,view:{startPage:f-1,endPage:b-1},page:t-1,currentPage:l.page,totalPages:l.pageCount,element:o,props:l}));return e.createElement(e.Fragment,{key:t},o)}))}var P=p({className:u("pages")},c("pages",{hostName:l.hostName}));return e.createElement("span",P,r)}));function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}G.displayName="PageLinks";var W=e.memo((function(a){var r=e.useContext(t),o=T.getProps(a,r),l=o.ptm,u=o.cx,m=function(e){return l(e,{hostName:o.hostName,context:{disabled:o.disabled}})},d=i("p-paginator-prev p-paginator-element p-link",{"p-disabled":o.disabled}),f=p({className:u("prevPageIcon")},m("prevPageIcon")),P=c.getJSXIcon(o.prevPageLinkIcon||e.createElement(b,f),Q({},f),{props:o}),y=p({type:"button",className:u("prevPageButton",{disabled:o.disabled}),onClick:o.onClick,disabled:o.disabled,"aria-label":n("previousPageLabel")},m("prevPageButton")),v=e.createElement("button",y,P,e.createElement(g,null));return o.template?s.getJSXElement(o.template,{onClick:o.onClick,className:d,iconClassName:"p-paginator-icon",disabled:o.disabled,element:v,props:o}):v}));W.displayName="PrevPageLink";var Z=e.memo((function(n){var r=e.useContext(t),o=_.getProps(n,r),l=o.options&&o.options.length>0,i=l?o.options.map((function(e){return{label:String(e),value:e}})):[],p=a("choose"),c=l?e.createElement(P,{value:o.value,options:i,onChange:o.onChange,appendTo:o.appendTo,disabled:o.disabled,placeholder:p,"aria-label":p,pt:o.ptm("RPPDropdown"),unstyled:o.unstyled,__parentMetadata:{parent:o.metaData}}):null;return o.template?s.getJSXElement(o.template,{value:o.value,options:i,onChange:o.onChange,appendTo:o.appendTo,currentPage:o.page,totalPages:o.pageCount,totalRecords:o.totalRecords,disabled:o.disabled,element:c,props:o}):c}));function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Z.displayName="RowsPerPageDropdown";var ne=e.memo(e.forwardRef((function(n,a){var r=e.useContext(t),c=N.getProps(n,r),u=te({props:c},c.__parentMetadata),g=N.setMetaData(u),m=g.ptm,d=g.cx;o(N.css.styles,g.isUnstyled,{name:"paginator"});var f=e.useRef(null),b=Math.floor(c.first/c.rows),P=Math.ceil(c.totalRecords/c.rows),h=0===b,j=b===P-1,C=0===P,E=function(){var e=P,t=Math.min(c.pageLinkSize,e),n=Math.max(0,Math.ceil(b-t/2)),a=Math.min(e-1,n+t-1);return[n=Math.max(0,n-(c.pageLinkSize-(a-n+1))),a]},x=function(){for(var e=[],t=E(),n=t[1],a=t[0];a<=n;a++)e.push(a+1);return e},L=function(e,t){var n=P,a=Math.floor(e/t);a>=0&&a<n&&(c.onPageChange&&c.onPageChange({first:e,rows:t,page:a,pageCount:n}))},I=function(e){L(0,c.rows),e.preventDefault()},S=function(e){L(c.first-c.rows,c.rows),e.preventDefault()},D=function(e){L((e.value-1)*c.rows,c.rows)},R=function(e){L(c.first+c.rows,c.rows),e.preventDefault()},T=function(e){L((P-1)*c.rows,c.rows),e.preventDefault()},_=function(e){L(0,e.value)};e.useImperativeHandle(a,(function(){return{props:c,getElement:function(){return f.current}}})),l((function(){b>0&&c.first>=c.totalRecords&&L((P-1)*c.rows,c.rows)}),[c.totalRecords]);var J=function(t,n){var a;switch(t){case"FirstPageLink":a=e.createElement(A,{hostName:"Paginator",key:t,onClick:I,disabled:h||C,template:n,firstPageLinkIcon:c.firstPageLinkIcon,ptm:m,cx:d});break;case"PrevPageLink":a=e.createElement(W,{hostName:"Paginator",key:t,onClick:S,disabled:h||C,template:n,prevPageLinkIcon:c.prevPageLinkIcon,ptm:m,cx:d});break;case"NextPageLink":a=e.createElement(q,{hostName:"Paginator",key:t,onClick:R,disabled:j||C,template:n,nextPageLinkIcon:c.nextPageLinkIcon,ptm:m,cx:d});break;case"LastPageLink":a=e.createElement(U,{hostName:"Paginator",key:t,onClick:T,disabled:j||C,template:n,lastPageLinkIcon:c.lastPageLinkIcon,ptm:m,cx:d});break;case"PageLinks":a=e.createElement(G,{hostName:"Paginator",key:t,value:x(),page:b,rows:c.rows,pageCount:P,onClick:D,template:n,ptm:m,cx:d});break;case"RowsPerPageDropdown":a=e.createElement(Z,{hostName:"Paginator",key:t,value:c.rows,page:b,pageCount:P,totalRecords:c.totalRecords,options:c.rowsPerPageOptions,onChange:_,appendTo:c.dropdownAppendTo,template:n,disabled:C,unstyled:c.unstyled,ptm:m,cx:d,metaData:u});break;case"CurrentPageReport":a=e.createElement(B,{hostName:"Paginator",reportTemplate:c.currentPageReportTemplate,key:t,page:b,pageCount:P,first:c.first,rows:c.rows,totalRecords:c.totalRecords,template:n,ptm:m});break;case"JumpToPageInput":a=e.createElement(F,{hostName:"Paginator",key:t,rows:c.rows,page:b,pageCount:P,onChange:L,disabled:C,template:n,ptm:m,unstyled:c.unstyled,metaData:u});break;default:a=null}return a};if(!c.alwaysShow&&P<=1)return null;var M,X=s.getJSXElement(c.leftContent,c),Y=s.getJSXElement(c.rightContent,c),z=(M=c.template)?"object"===w(M)?M.layout?M.layout.split(" ").map((function(e){var t=e.trim();return J(t,M[t])})):Object.entries(M).map((function(e){var t,n,a=(n=2,y(t=e)||v(t,n)||O(t,n)||k());return J(a[0],a[1])})):M.split(" ").map((function(e){return J(e.trim())})):null,V=p({className:d("left")},m("left")),H=X&&e.createElement("div",V,X),$=p({className:d("end")},m("end")),K=Y&&e.createElement("div",$,Y),Q=p({ref:f,className:i(c.className,d("root")),style:c.style},N.getOtherProps(c),m("root"));return e.createElement("div",Q,H,z,K)})));ne.displayName="Paginator";export{ne as Paginator};
