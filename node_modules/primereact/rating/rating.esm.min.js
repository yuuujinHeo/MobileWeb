import*as e from"react";import{PrimeReactContext as n}from"primereact/api";import{BanIcon as t}from"primereact/icons/ban";import{StarIcon as r}from"primereact/icons/star";import{StarFillIcon as o}from"primereact/icons/starfill";import{Tooltip as a}from"primereact/tooltip";import{classNames as i,ObjectUtils as l,mergeProps as c,IconUtils as p}from"primereact/utils";import{ComponentBase as u,useHandleStyle as s}from"primereact/componentbase";function m(){return m=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},m.apply(this,arguments)}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function y(e,n){if("object"!==f(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function g(e){var n=y(e,"string");return"symbol"===f(n)?n:String(n)}var v=u.extend({defaultProps:{__TYPE:"Rating",id:null,value:null,disabled:!1,readOnly:!1,stars:5,cancel:!0,style:null,className:null,tooltip:null,tooltipOptions:null,onChange:null,onIcon:null,offIcon:null,cancelIcon:null,cancelIconProps:null,onIconProps:null,offIconProps:null,children:void 0},css:{classes:{onIcon:"p-rating-icon",item:function(e){return i("p-rating-item",{"p-rating-item-active":e.active})},cancelIcon:"p-rating-icon p-rating-cancel",cancelItem:"p-rating-item p-rating-cancel-item",root:function(e){var n=e.props;return i("p-rating",{"p-disabled":n.disabled,"p-readonly":n.readOnly},n.className)}},styles:"\n@layer primereact {\n    .p-rating {\n        display: flex;\n        align-items: center;\n    }\n    \n    .p-rating-item {\n        display: inline-flex;\n        align-items: center;\n        cursor: pointer;\n    }\n    \n    .p-rating.p-readonly .p-rating-item {\n        cursor: default;\n    }\n}\n"}});function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){var r,o,a;r=e,a=t[n],(o=g(o=n))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var O=e.memo(e.forwardRef((function(i,u){var f=e.useContext(n),y=v.getProps(i,f),g=e.useRef(null),b=v.setMetaData({props:y}),O=b.ptm,I=b.cx;s(v.css.styles,b.isUnstyled,{name:"rating"});var P=function(e,n){return O(n,{context:{active:e<=y.value}})},E=!y.disabled&&!y.readOnly,j=E?0:null,h=function(e,n){E&&y.onChange&&y.onChange({originalEvent:e,value:n,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},target:{name:y.name,id:y.id,value:n}}),e.preventDefault()},w=function(e){E&&y.onChange&&y.onChange({originalEvent:e,value:null,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},target:{name:y.name,id:y.id,value:null}}),e.preventDefault()},D=function(e,n){"Enter"===e.key&&h(e,n)},S=function(e){"Enter"===e.key&&w(e)};e.useImperativeHandle(u,(function(){return{props:y,getElement:function(){return g.current}}}));var N=l.isNotEmpty(y.tooltip),x=c({ref:g,id:y.id,className:I("root"),style:y.style},v.getOtherProps(y),O("root")),C=function(){if(y.cancel){var n=c({className:I("cancelIcon")},O("cancelIcon")),r=p.getJSXIcon(y.cancelIcon||e.createElement(t,n),d(d({},n),y.cancelIconProps),{props:y}),o=c({className:I("cancelItem"),onClick:w,tabIndex:j,onKeyDown:S},O("cancelItem"));return e.createElement("div",o,r)}return null}(),k=Array.from({length:y.stars},(function(e,n){return n+1})).map((function(n){var t=n<=y.value,a=c({className:I("onIcon")},P(y.value,"onIcon")),i=c({className:I("onIcon")},P(y.value,"offIcon")),l=p.getJSXIcon((t?{type:y.onIcon||e.createElement(o,a)}:{type:y.offIcon||e.createElement(r,i)}).type,d({},t?a:i),{props:y}),u=c({key:n,className:I("item",{active:t}),tabIndex:j,onClick:function(e){return h(e,n)},onKeyDown:function(e){return D(e,n)}},P(y.value,"item"));return e.createElement("div",m({key:n},u),l)}));return e.createElement(e.Fragment,null,e.createElement("div",x,C,k),N&&e.createElement(a,m({target:g,content:y.tooltip},y.tooltipOptions,{pt:O("tooltip")})))})));O.displayName="Rating";export{O as Rating};
