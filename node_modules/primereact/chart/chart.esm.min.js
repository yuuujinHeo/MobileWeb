import*as t from"react";import{PrimeReactContext as e}from"primereact/api";import{useUnmountEffect as r}from"primereact/hooks";import{classNames as n,mergeProps as a}from"primereact/utils";import{ComponentBase as u,useHandleStyle as o}from"primereact/componentbase";var i=u.extend({defaultProps:{__TYPE:"Chart",id:null,type:null,data:null,options:null,plugins:null,width:null,height:null,style:null,className:null,children:void 0},css:{classes:{root:function(t){return n("p-chart",t.props.className)}},inlineStyles:{root:function(t){var e=t.props;return Object.assign({width:e.width,height:e.height},e.style)}},styles:"\n        @layer primereact {\n            .p-chart {\n                position: relative\n            }\n        }\n        "}}),s=function(){try{return Chart}catch(t){return null}}(),l=t.memo(t.forwardRef((function(n,u){var l=t.useContext(e),c=i.getProps(n,l),p=i.setMetaData({props:c}),f=p.ptm,m=p.cx,h=p.sx;o(i.css.styles,p.isUnstyled,{name:"chart"});var d=t.useRef(null),g=t.useRef(null),y=t.useRef(null),v=function(){w();var t={type:c.type,data:c.data,options:c.options,plugins:c.plugins};s?g.current=new s(y.current,t):import("chart.js/auto").then((function(e){w(),y.current&&e&&(g.current=e.default?new e.default(y.current,t):new e(y.current,t))}))},w=function(){g.current&&(g.current.destroy(),g.current=null)};t.useImperativeHandle(u,(function(){return{props:c,getCanvas:function(){return y.current},getChart:function(){return g.current},getBase64Image:function(){return g.current.toBase64Image()},getElement:function(){return d.current},generateLegend:function(){return g.current&&g.current.generateLegend()},refresh:function(){return g.current&&g.current.update()}}})),t.useEffect((function(){v()})),r((function(){w()}));var C=c.ariaLabel||c.options&&c.options.plugins&&c.options.plugins.title&&c.options.plugins.title.text,x=a({id:c.id,ref:d,style:h("root"),className:m("root")},i.getOtherProps(c),f("root")),E=a({ref:y,width:c.width,height:c.height,role:"img","aria-label":C},f("canvas"));return t.createElement("div",x,t.createElement("canvas",E))})),(function(t,e){return t.data===e.data&&t.options===e.options&&t.type===e.type}));l.displayName="Chart";export{l as Chart};
