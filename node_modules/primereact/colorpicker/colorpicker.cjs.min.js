"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),n=require("primereact/api"),r=require("primereact/componentbase"),t=require("primereact/hooks"),o=require("primereact/overlayservice"),i=require("primereact/tooltip"),l=require("primereact/utils"),a=require("primereact/csstransition"),c=require("primereact/portal");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var t=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,t.get?t:{enumerable:!0,get:function(){return e[r]}})}})),n.default=e,Object.freeze(n)}var s=p(e),f=u(n);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function m(e,n){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,n||"default");if("object"!==d(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function h(e){var n=m(e,"string");return"symbol"===d(n)?n:String(n)}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},b.apply(this,arguments)}function g(e){if(Array.isArray(e))return e}function y(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i,l,a=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;c=!1}else for(;!(c=(t=i.call(r)).done)&&(a.push(t.value),a.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw o}}return a}}function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function x(e,n){if(e){if("string"==typeof e)return v(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,n):void 0}}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(e,n){return g(e)||y(e,n)||x(e,n)||k()}var E=r.ComponentBase.extend({defaultProps:{__TYPE:"ColorPicker",appendTo:null,autoFocus:!1,children:void 0,className:null,defaultColor:"ff0000",disabled:!1,format:"hex",id:null,inline:!1,inputClassName:null,inputId:null,inputRef:null,inputStyle:null,onChange:null,onHide:null,onShow:null,panelClassName:null,panelStyle:null,style:null,tabIndex:null,tooltip:null,tooltipOptions:null,transitionOptions:null,value:null},css:{classes:{root:function(e){var n=e.props;return l.classNames("p-colorpicker p-component",{"p-colorpicker-overlay":!n.inline},n.className)},input:function(e){var n=e.props;return l.classNames("p-colorpicker-preview p-inputtext",n.inputClassName,{"p-disabled":n.disabled})},panel:function(e){var n=e.panelProps,r=e.context;return l.classNames("p-colorpicker-panel",n.panelClassName,{"p-colorpicker-overlay-panel":!n.inline,"p-disabled":n.disabled,"p-input-filled":r&&"filled"===r.inputStyle||"filled"===f.default.inputStyle,"p-ripple-disabled":r&&!1===r.ripple||!1===f.default.ripple})},content:"p-colorpicker-content",hueHandle:"p-colorpicker-hue-handle",hue:"p-colorpicker-hue",colorHandle:"p-colorpicker-color-handle",color:"p-colorpicker-color",selector:"p-colorpicker-color-selector",transition:"p-connected-overlay"},styles:"\n@layer primereact {\n    .p-colorpicker {\n        display: inline-block;\n    }\n    \n    .p-colorpicker-dragging {\n        cursor: pointer;\n    }\n    \n    .p-colorpicker-overlay {\n        position: relative;\n    }\n    \n    .p-colorpicker-panel {\n        position: relative;\n        width: 193px;\n        height: 166px;\n    }\n    \n    .p-colorpicker-overlay-panel {\n        position: absolute;\n        top: 0;\n        left: 0;\n    }\n    \n    .p-colorpicker-preview {\n        cursor: pointer;\n    }\n    \n    .p-colorpicker-panel .p-colorpicker-content {\n        position: relative;\n    }\n    \n    .p-colorpicker-panel .p-colorpicker-color-selector {\n        width: 150px;\n        height: 150px;\n        top: 8px;\n        left: 8px;\n        position: absolute;\n    }\n    \n    .p-colorpicker-panel .p-colorpicker-color {\n        width: 150px;\n        height: 150px;\n    }\n    \n    .p-colorpicker-panel .p-colorpicker-color-handle {\n        position: absolute;\n        top: 0px;\n        left: 150px;\n        border-radius: 100%;\n        width: 10px;\n        height: 10px;\n        border-width: 1px;\n        border-style: solid;\n        margin: -5px 0 0 -5px;\n        cursor: pointer;\n        opacity: 0.85;\n    }\n    \n    .p-colorpicker-panel .p-colorpicker-hue {\n        width: 17px;\n        height: 150px;\n        top: 8px;\n        left: 167px;\n        position: absolute;\n        opacity: 0.85;\n    }\n    \n    .p-colorpicker-panel .p-colorpicker-hue-handle {\n        position: absolute;\n        top: 150px;\n        left: 0px;\n        width: 21px;\n        margin-left: -2px;\n        margin-top: -5px;\n        height: 10px;\n        border-width: 2px;\n        border-style: solid;\n        opacity: 0.85;\n        cursor: pointer;\n    }\n    \n    .p-colorpicker-panel .p-colorpicker-color {\n        background: linear-gradient(to top, #000 0%, rgb(0 0 0 / 0) 100%), linear-gradient(to right, #fff 0%, rgb(255 255 255 / 0) 100%)\n    }\n    .p-colorpicker-panel .p-colorpicker-hue {\n        background: linear-gradient(0deg, red 0, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, red)\n    }\n}\n"}}),w=s.forwardRef((function(e,r){var t,o,i=s.useContext(n.PrimeReactContext),u=e.ptm,p=e.cx,f=(t=l.mergeProps({className:p("panel",{panelProps:e,context:i}),style:e.panelStyle,onClick:e.onClick},u("panel",{hostName:e.hostName})),o=l.mergeProps({classNames:p("transition"),in:e.in,timeout:{enter:120,exit:100},options:e.transitionOptions,unmountOnExit:!0,onEnter:e.onEnter,onEntered:e.onEntered,onExit:e.onExit,onExited:e.onExited},u("transition",{hostName:e.hostName})),s.createElement(a.CSSTransition,b({nodeRef:r},o),s.createElement("div",b({ref:r},t),e.children)));return e.inline?f:s.createElement(c.Portal,{element:f,appendTo:e.appendTo})}));function P(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function S(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?P(Object(r),!0).forEach((function(n){var t,o,i;t=e,i=r[n],(o=h(o=n))in t?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}w.displayName="ColorPickerPanel";var C=s.memo(s.forwardRef((function(e,a){var c=s.useContext(n.PrimeReactContext),u=E.getProps(e,c),p=O(s.useState(!1),2),d=p[0],m=p[1],h=E.setMetaData({props:u,state:{overlayVisible:d}}),g=h.ptm,y=h.cx,v=h.isUnstyled;r.useHandleStyle(E.css.styles,v,{name:"colorpicker"});var x=s.useRef(null),k=s.useRef(null),P=s.useRef(u.inputRef),C=s.useRef(null),M=s.useRef(null),j=s.useRef(null),N=s.useRef(null),T=s.useRef(!1),D=s.useRef(null),R=s.useRef(!1),H=O(t.useOverlayListener({target:x,overlay:k,listener:function(e,n){n.valid&&le()},when:d}),2),I=H[0],U=H[1],q=O(t.useEventListener({type:"mousemove",listener:function(e){R.current&&G(e),T.current&&z(e)}}),2),Y=q[0],A=q[1],_=O(t.useEventListener({type:"mouseup",listener:function(){R.current=T.current=!1,l.DomHandler.removeClass(x.current,"p-colorpicker-dragging"),A(),F()}}),2),Z=_[0],F=_[1],L=function(e){u.disabled||(T.current=!0,z(e),!v&&l.DomHandler.addClass(x.current,"p-colorpicker-dragging"))},z=function(e){var n=N.current.getBoundingClientRect().top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0);D.current=pe({h:Math.floor(360*(150-Math.max(0,Math.min(150,(e.pageY||e.changedTouches[0].pageY)-n)))/150),s:100,b:100}),ne(),te(),J()},B=function(e){u.disabled||(R.current=!0,G(e),!v&&l.DomHandler.addClass(x.current,"p-colorpicker-dragging"),e.preventDefault())},X=function(e){R.current&&(G(e),e.preventDefault()),T.current&&(z(e),e.preventDefault())},K=function(){R.current=!1,T.current=!1,!v&&l.DomHandler.removeClass(x.current,"p-colorpicker-dragging"),$()},V=function(){Y(),Z()},$=function(){A(),F()},G=function(e){var n=C.current.getBoundingClientRect(),r=n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),t=n.left+document.body.scrollLeft,o=Math.floor(100*Math.max(0,Math.min(150,(e.pageX||e.changedTouches[0].pageX)-t))/150),i=Math.floor(100*(150-Math.max(0,Math.min(150,(e.pageY||e.changedTouches[0].pageY)-r)))/150);D.current=pe({h:D.current.h,s:o,b:i}),re(),oe(),J()},J=function(){switch(u.format){case"hex":ee(be(D.current));break;case"rgb":ee(me(D.current));break;case"hsb":ee(D.current)}},Q=function(e){var n;if(e)switch(u.format){case"hex":n=fe(e);break;case"rgb":n=de(e);break;case"hsb":n=e}else n=fe(u.defaultColor);return n},W=function(e){D.current=Q(e)},ee=function(e){u.onChange&&u.onChange({value:e,stopPropagation:function(){},preventDefault:function(){},target:{name:u.name,id:u.id,value:e}})},ne=function(){if(C.current){var e=pe({h:D.current.h,s:100,b:100});C.current.style.backgroundColor="#"+be(e)}},re=function(){M.current&&(M.current.style.left=Math.floor(150*D.current.s/100)+"px",M.current.style.top=Math.floor(150*(100-D.current.b)/100)+"px")},te=function(){j.current&&(j.current.style.top=Math.floor(150-150*D.current.h/360)+"px")},oe=function(){P.current&&(P.current.style.backgroundColor="#"+be(D.current))},ie=function(){m(!0)},le=function(){m(!1)},ae=function(){ce()},ce=function(){d?le():ie()},ue=function(e){switch(e.which){case 32:ce(),e.preventDefault();break;case 27:case 9:le()}},pe=function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},se=function(e){var n=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:n>>16,g:(65280&n)>>8,b:255&n}},fe=function(e){return de(se(e))},de=function(e){var n={h:0,s:0,b:0},r=Math.min(e.r,e.g,e.b),t=Math.max(e.r,e.g,e.b),o=t-r;return n.b=t,n.s=0!==t?255*o/t:0,n.h=0!==n.s?e.r===t?(e.g-e.b)/o:e.g===t?2+(e.b-e.r)/o:4+(e.r-e.g)/o:-1,n.h*=60,n.h<0&&(n.h+=360),n.s*=100/255,n.b*=100/255,n},me=function(e){var n={r:null,g:null,b:null},r=Math.round(e.h),t=Math.round(255*e.s/100),o=Math.round(255*e.b/100);if(0===t)n={r:o,g:o,b:o};else{var i=o,l=(255-t)*o/255,a=r%60*(i-l)/60;360===r&&(r=0),r<60?(n.r=i,n.b=l,n.g=l+a):r<120?(n.g=i,n.b=l,n.r=i-a):r<180?(n.g=i,n.r=l,n.b=l+a):r<240?(n.b=i,n.r=l,n.g=i-a):r<300?(n.b=i,n.g=l,n.r=l+a):r<360?(n.r=i,n.g=l,n.b=i-a):(n.r=0,n.g=0,n.b=0)}return{r:Math.round(n.r),g:Math.round(n.g),b:Math.round(n.b)}},he=function(e){var n=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];for(var r in n)1===n[r].length&&(n[r]="0"+n[r]);return n.join("")},be=function(e){return he(me(e))},ge=function(){te(),re(),oe(),ne()},ye=function(){P.current&&l.DomHandler.alignOverlay(k.current,P.current.parentElement,u.appendTo||c&&c.appendTo||f.default.appendTo)};s.useImperativeHandle(a,(function(){return{props:u,show:ie,hide:le,focus:function(){return l.DomHandler.focus(P.current)},getElement:function(){return x.current},getOverlay:function(){return k.current},getInput:function(){return P.current}}})),s.useEffect((function(){l.ObjectUtils.combinedRefs(P,u.inputRef)}),[P,u.inputRef]),t.useMountEffect((function(){W(u.value),ge(),u.autoFocus&&l.DomHandler.focus(P.current,u.autoFocus),ye()})),t.useUpdateEffect((function(){R.current||T.current||W(u.value)}),[u.value]),t.useUpdateEffect((function(){ge()})),t.useUnmountEffect((function(){l.ZIndexUtils.clear(k.current)}));var ve,xe,ke,Oe,Ee,we,Pe,Se,Ce=l.ObjectUtils.isNotEmpty(u.tooltip),Me=(ve=l.mergeProps({ref:C,className:y("selector"),onMouseDown:function(e){return n=e,void(u.disabled||(V(),B(n)));var n},onTouchStart:function(e){return B(e)},onTouchMove:function(e){return X(e)},onTouchEnd:K},g("selector")),xe=l.mergeProps({className:y("color")},g("color")),ke=l.mergeProps({ref:M,className:y("colorHandle")},g("colorHandle")),we=s.createElement("div",ve,s.createElement("div",xe,s.createElement("div",ke))),Oe=l.mergeProps({className:y("hue"),onMouseDown:function(e){return n=e,void(u.disabled||(V(),L(n)));var n},onTouchStart:function(e){return L(e)},onTouchMove:function(e){return X(e)},onTouchEnd:K},g("hue")),Ee=l.mergeProps({className:y("hueHandle")},g("hueHandle")),Pe=s.createElement("div",b({ref:N},Oe),s.createElement("div",b({ref:j},Ee))),Se=l.mergeProps({className:y("content")},g("content")),s.createElement("div",Se,we,Pe)),je=function(){if(!u.inline){var e=E.getOtherProps(u),n=l.mergeProps(S({ref:P,type:"text",readOnly:!0,className:y("input"),style:u.inputStyle,id:u.inputId,tabIndex:u.tabIndex,disabled:u.disabled,onClick:ae,onKeyDown:ue},e),g("input"));return s.createElement("input",n)}return null}(),Ne=l.mergeProps({id:u.id,ref:x,style:u.style,className:y("root")},E.getOtherProps(u),g("root"));return s.createElement(s.Fragment,null,s.createElement("div",Ne,je,s.createElement(w,{hostName:"ColorPicker",ref:k,appendTo:u.appendTo,inline:u.inline,disabled:u.disabled,panelStyle:u.panelStyle,panelClassName:u.panelClassName,onClick:function(e){u.inline||o.OverlayService.emit("overlay-click",{originalEvent:e,target:x.current})},in:u.inline||d,onEnter:function(){var e=u.inline?void 0:{position:"absolute",top:"0",left:"0"};l.ZIndexUtils.set("overlay",k.current,c&&c.autoZIndex||f.default.autoZIndex,c&&c.zIndex.overlay||f.default.zIndex.overlay),l.DomHandler.addStyles(k.current,e),ye()},onEntered:function(){I(),u.onShow&&u.onShow()},onExit:function(){U()},onExited:function(){l.ZIndexUtils.clear(k.current),u.onHide&&u.onHide()},transitionOptions:u.transitionOptions,ptm:g,cx:y},Me)),Ce&&s.createElement(i.Tooltip,b({target:x,content:u.tooltip},u.tooltipOptions,{pt:g("tooltip")})))})));C.displayName="ColorPicker",exports.ColorPicker=C;
