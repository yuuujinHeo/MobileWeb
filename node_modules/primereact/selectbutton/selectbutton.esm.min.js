import*as e from"react";import{PrimeReactContext as t}from"primereact/api";import{Tooltip as n}from"primereact/tooltip";import{classNames as o,mergeProps as l,ObjectUtils as r,DomHandler as a}from"primereact/utils";import{ComponentBase as i}from"primereact/componentbase";import{Ripple as u}from"primereact/ripple";function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s.apply(this,arguments)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e){if(Array.isArray(e))return p(e)}function m(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e){return c(e)||m(e)||d(e)||f()}var v=i.extend({defaultProps:{__TYPE:"SelectButton",id:null,value:null,options:null,optionLabel:null,optionValue:null,optionDisabled:null,tabIndex:null,multiple:!1,unselectable:!0,allowEmpty:!0,disabled:!1,style:null,className:null,dataKey:null,tooltip:null,tooltipOptions:null,itemTemplate:null,onChange:null,children:void 0},css:{classes:{root:function(e){return o("p-selectbutton p-buttonset p-component",e.props.className)},button:function(e){var t=e.itemProps;return o("p-button p-component",{"p-highlight":t.selected,"p-disabled":t.disabled,"p-focus":e.focusedState})},label:"p-button-label p-c"}}});function y(e){if(Array.isArray(e))return e}function g(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,l,r,a,i=[],u=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(o=r.call(n)).done)&&(i.push(o.value),i.length!==t);u=!0);}catch(e){s=!0,l=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw l}}return i}}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var E=e.memo((function(t){var n,a,i,s=e.useState(!1),p=(a=2,y(n=s)||g(n,a)||d(n,a)||h()),c=p[0],m=p[1],f=t.ptm,b=t.cx,v=function(e){return f(e,{hostName:t.hostName,context:{selected:t.selected,disabled:t.disabled,option:t.option}})},E=function(e){t.onClick&&t.onClick({originalEvent:e,option:t.option})},S=(i=l({className:b("label")},v("label")),t.template?r.getJSXElement(t.template,t.option):e.createElement("span",i,t.label)),N=l({className:o(t.className,b("button",{itemProps:t,focusedState:c})),role:"button","aria-label":t.label,"aria-pressed":t.selected,onClick:E,onKeyDown:function(e){32===e.which&&(E(e),e.preventDefault())},tabIndex:t.tabIndex,onFocus:function(){m(!0)},onBlur:function(){m(!1)}},v("button"));return e.createElement("div",N,S,!t.disabled&&e.createElement(u,null))}));E.displayName="SelectButtonItem";var S=e.memo(e.forwardRef((function(o,i){var u=e.useContext(t),p=v.getProps(o,u),c=e.useRef(null),m=v.setMetaData({props:p}),d=m.ptm,f=m.cx,y=function(e){if(!p.disabled&&!S(e.option)){var t=N(e.option);if(!t||p.unselectable&&p.allowEmpty){var n,o=h(e.option);if(p.multiple){var l=p.value?b(p.value):[];n=t?l.filter((function(e){return!r.equals(e,o,p.dataKey)})):[].concat(b(l),[o])}else n=t?null:o;p.onChange&&p.onChange({originalEvent:e.originalEvent,value:n,stopPropagation:function(){e.originalEvent.stopPropagation()},preventDefault:function(){e.originalEvent.preventDefault()},target:{name:p.name,id:p.id,value:n}})}}},g=function(e){return p.optionLabel?r.resolveFieldData(e,p.optionLabel):e&&void 0!==e.label?e.label:e},h=function(e){return p.optionValue?r.resolveFieldData(e,p.optionValue):e&&void 0!==e.value?e.value:e},S=function(e){return p.optionDisabled?r.isFunction(p.optionDisabled)?p.optionDisabled(e):r.resolveFieldData(e,p.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled},N=function(e){var t=h(e);return p.multiple?!(!p.value||!p.value.length)&&p.value.some((function(e){return r.equals(e,t,p.dataKey)})):r.equals(p.value,t,p.dataKey)};e.useImperativeHandle(i,(function(){return{props:p,focus:function(){return a.focusFirstElement(c.current)},getElement:function(){return c.current}}}));var D=r.isNotEmpty(p.tooltip),w=p.options&&p.options.length?p.options.map((function(t,n){var o=p.disabled||S(t),l=g(t),r=o?null:0,a=N(t);return e.createElement(E,{hostName:"SelectButton",key:l+"_"+n,label:l,className:t.className,option:t,onClick:y,template:p.itemTemplate,selected:a,tabIndex:r,disabled:o,ptm:d,cx:f})})):null,x=l({ref:c,id:p.id,className:f("root"),style:p.style,role:"group"},v.getOtherProps(p),d("root"));return e.createElement(e.Fragment,null,e.createElement("div",x,w),D&&e.createElement(n,s({target:c,content:p.tooltip},p.tooltipOptions,{pt:d("tooltip")})))})));S.displayName="SelectButton";export{S as SelectButton};
