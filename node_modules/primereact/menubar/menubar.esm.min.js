import*as e from"react";import n,{PrimeReactContext as t}from"primereact/api";import{ComponentBase as r,useHandleStyle as o}from"primereact/componentbase";import{useEventListener as i,useMountEffect as u,useUpdateEffect as a,useUnmountEffect as l}from"primereact/hooks";import{BarsIcon as c}from"primereact/icons/bars";import{classNames as m,mergeProps as s,IconUtils as p,ObjectUtils as f,DomHandler as b,UniqueComponentId as d,ZIndexUtils as y}from"primereact/utils";import{AngleDownIcon as v}from"primereact/icons/angledown";import{AngleRightIcon as g}from"primereact/icons/angleright";import{Ripple as h}from"primereact/ripple";function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function S(e,n){if("object"!==O(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function w(e){var n=S(e,"string");return"symbol"===O(n)?n:String(n)}function E(e,n,t){return(n=w(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function j(e){if(Array.isArray(e))return e}function P(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i,u,a=[],l=!0,c=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=i.call(t)).done)&&(a.push(r.value),a.length!==n);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(c)throw o}}return a}}function I(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function N(e,n){if(e){if("string"==typeof e)return I(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?I(e,n):void 0}}function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e,n){return j(e)||P(e,n)||N(e,n)||x()}var D=r.extend({defaultProps:{__TYPE:"Menubar",id:null,model:null,style:null,className:null,start:null,submenuIcon:null,menuIcon:null,end:null,children:void 0},css:{classes:{start:"p-menubar-start",end:"p-menubar-end",button:"p-menubar-button",root:function(e){return m("p-menubar p-component",{"p-menubar-mobile-active":e.mobileActiveState})},separator:"p-menu-separator",icon:"p-menuitem-icon",label:"p-menuitem-text",submenuIcon:"p-submenu-icon",menuitem:function(e){return m("p-menuitem",{"p-menuitem-active":e.activeItemState===e.item})},menu:"p-menubar-root-list",submenu:"p-submenu-list",action:function(e){return m("p-menuitem-link",{"p-disabled":e.item.disabled})}},styles:"\n@layer primereact {\n    .p-menubar {\n        display: flex;\n        align-items: center;\n    }\n    \n    .p-menubar ul {\n        margin: 0;\n        padding: 0;\n        list-style: none;\n    }\n    \n    .p-menubar .p-menuitem-link {\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        text-decoration: none;\n        overflow: hidden;\n        position: relative;\n    }\n    \n    .p-menubar .p-menuitem-text {\n        line-height: 1;\n    }\n    \n    .p-menubar .p-menuitem {\n        position: relative;\n    }\n    \n    .p-menubar-root-list {\n        display: flex;\n        align-items: center;\n        flex-wrap: wrap;\n    }\n    \n    .p-menubar-root-list > li ul {\n        display: none;\n        z-index: 1;\n    }\n    \n    .p-menubar-root-list > .p-menuitem-active > .p-submenu-list {\n        display: block;\n    }\n    \n    .p-menubar .p-submenu-list {\n        display: none;\n        position: absolute;\n        z-index: 1;\n    }\n    \n    .p-menubar .p-submenu-list > .p-menuitem-active > .p-submenu-list {\n        display: block;\n        left: 100%;\n        top: 0;\n    }\n    \n    .p-menubar .p-submenu-list .p-menuitem-link .p-submenu-icon {\n        margin-left: auto;\n    }\n    \n    .p-menubar .p-menubar-custom,\n    .p-menubar .p-menubar-end {\n        margin-left: auto;\n        align-self: center;\n    }\n    \n    .p-menubar-button {\n        display: none;\n        cursor: pointer;\n        align-items: center;\n        justify-content: center;\n        text-decoration: none;\n    }\n}\n"}});function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){E(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var M=e.memo(e.forwardRef((function(n,t){var r=k(e.useState(null),2),o=r[0],l=r[1],c=n.ptm,d=n.cx,y=function(e,t){return c(t,{props:n,hostName:n.hostName,context:{active:o===e}})},O=k(i({type:"click",listener:function(e){t&&t.current&&!t.current.contains(e.target)&&l(null)}}),1)[0],S=function(e,t){t.disabled||n.mobileActive?e.preventDefault():n.root?(o||n.popup)&&l(t):l(t)},w=function(e,n){n.disabled?e.preventDefault():(n.url||e.preventDefault(),n.command&&n.command({originalEvent:e,item:n}),n.items?l(o&&n===o?null:n):J())},E=function(e,t){var r=e.currentTarget.parentElement;switch(e.which){case 40:n.root?t.items&&P(t,r):N(r),e.preventDefault();break;case 38:!n.root&&x(r),e.preventDefault();break;case 39:if(n.root){var o=D(r);o&&o.children[0].focus()}else t.items&&P(t,r);e.preventDefault();break;case 37:n.root&&x(r),e.preventDefault()}n.onKeyDown&&n.onKeyDown(e,r)},j=function(e,t){n.root?38===e.which&&null==t.previousElementSibling&&I(t):37===e.which&&I(t)},P=function(e,n){l(e),setTimeout((function(){n.children[1].children[0].children[0].focus()}),50)},I=function(e){l(null),e.parentElement.previousElementSibling.focus()},N=function(e){var n=D(e);n&&n.children[0].focus()},x=function(e){var n=A(e);n&&n.children[0].focus()},D=function e(n){var t=n.nextElementSibling;return t?b.getAttribute(t,'[data-p-disabled="true"]')||!b.getAttribute(t,'[data-pc-section="menuitem"]')?e(t):t:null},A=function e(n){var t=n.previousElementSibling;return t?b.getAttribute(t,'[data-p-disabled="true"]')||!b.getAttribute(t,'[data-pc-section="menuitem"]')?e(t):t:null},J=function(){l(null),n.onLeafClick&&n.onLeafClick()};u((function(){O()})),a((function(){!n.parentActive&&l(null)}),[n.parentActive]);var R=function(t){var r=n.id+"_separator_"+t,o=s({id:r,key:r,className:d("separator"),role:"separator"},c("separator",{hostName:n.hostName}));return e.createElement("li",o)},X=function(t,r){return t.items?e.createElement(M,{id:n.id+"_"+r,hostName:n.hostName,menuProps:n.menuProps,model:t.items,mobileActive:n.mobileActive,onLeafClick:J,onKeyDown:j,parentActive:t===o,submenuIcon:n.submenuIcon,ptm:c,cx:d}):null},_=function(t,r){if(!1===t.visible)return null;var i=t.id||n.id+"_"+r,u=m("p-menuitem-link",{"p-disabled":t.disabled}),a=m("p-menuitem-icon",t.icon),l=s({className:d("icon")},y(t,"icon")),c=p.getJSXIcon(t.icon,C({},l),{props:n.menuProps}),b=s({className:d("label")},y(t,"label")),O=t.label&&e.createElement("span",b,t.label),j=s({className:d("submenuIcon")},y(t,"submenuIcon")),P=t.items&&p.getJSXIcon(n.root?n.submenuIcon||e.createElement(v,j):n.submenuIcon||e.createElement(g,j),C({},j),{props:C({menuProps:n.menuProps},n)}),I=X(t,r),N=s({href:t.url||"#",role:"menuitem",className:d("action",{item:t}),target:t.target,"aria-haspopup":null!=t.items,onClick:function(e){return w(e,t)},onKeyDown:function(e){return E(e,t)}},y(t,"action")),x=e.createElement("a",N,c,O,P,e.createElement(h,null));t.template&&(x=f.getJSXElement(t.template,t,{onClick:function(e){return w(e,t)},onKeyDown:function(e){return E(e,t)},className:u,labelClassName:"p-menuitem-text",iconClassName:a,submenuIconClassName:"p-submenu-icon",element:x,props:n}));var k=s({id:i,key:i,role:"none",className:m(t.className,d("menuitem",{item:t,activeItemState:o})),onMouseEnter:function(e){return S(e,t)},"data-p-disabled":t.disabled||!1},y(t,"menuitem"));return e.createElement("li",k,x,I)},K=n.root?"menubar":"menu",T=n.root?"menu":"submenu",z=n.model?n.model.map((function(e,n){return e.separator?R(n):_(e,n)})):null,L=s({ref:t,className:d(T),style:!n.root&&{display:n.parentActive?"block":"none"},role:K},c(T));return e.createElement("ul",L,z)})));function J(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function R(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?J(Object(t),!0).forEach((function(n){E(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):J(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}M.displayName="MenubarSub";var X=e.memo(e.forwardRef((function(r,b){var v=e.useContext(t),g=D.getProps(r,v),h=k(e.useState(g.id),2),O=h[0],S=h[1],w=k(e.useState(!1),2),E=w[0],j=w[1],P=e.useRef(null),I=e.useRef(null),N=e.useRef(null),x=D.setMetaData({props:g,state:{id:O,mobileActive:E}}),A=x.ptm,C=x.cx;o(D.css.styles,x.isUnstyled,{name:"menubar"});var J=k(i({type:"click",listener:function(e){E&&T(e)&&j(!1)}}),2),X=J[0],_=J[1],K=function(e){e.preventDefault(),j((function(e){return!e}))},T=function(e){return I.current!==e.target&&!I.current.contains(e.target)&&N.current!==e.target&&!N.current.contains(e.target)};u((function(){O||S(d())})),a((function(){E?(y.set("menu",I.current,v&&v.autoZIndex||n.autoZIndex,v&&v.zIndex.menu||n.zIndex.menu),X()):(_(),y.clear(I.current))}),[E]),l((function(){y.clear(I.current)})),e.useImperativeHandle(b,(function(){return{props:g,toggle:K,getElement:function(){return P.current},getRootMenu:function(){return I.current},getMenuButton:function(){return N.current}}}));var z=function(){if(g.start){var n=f.getJSXElement(g.start,g),t=s({className:C("start")},A("start"));return e.createElement("div",t,n)}return null}(),L=function(){if(g.end){var n=f.getJSXElement(g.end,g),t=s({className:C("end")},A("end"));return e.createElement("div",t,n)}return null}(),U=function(){if(g.model&&g.model.length<1)return null;var n=s({ref:N,href:"#",role:"button",tabIndex:0,className:C("button"),onClick:function(e){return K(e)}},A("button")),t=s(A("popupIcon")),r=p.getJSXIcon(g.menuIcon||e.createElement(c,t),R({},t),{props:g});return e.createElement("a",n,r)}(),Z=e.createElement(M,{hostName:"Menubar",id:O,ref:I,menuProps:g,model:g.model,root:!0,mobileActive:E,onLeafClick:function(){j(!1)},submenuIcon:g.submenuIcon,ptm:A,cx:C}),B=s({id:g.id,className:m(g.className,C("root",{mobileActiveState:E})),style:g.style},D.getOtherProps(g),A("root"));return e.createElement("div",B,z,U,Z,L)})));X.displayName="Menubar";export{X as Menubar};
