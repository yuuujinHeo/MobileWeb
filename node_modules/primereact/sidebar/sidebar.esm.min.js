import*as e from"react";import{DomHandler as n,ObjectUtils as t,classNames as r,ZIndexUtils as i,mergeProps as o,IconUtils as a}from"primereact/utils";import s,{PrimeReactContext as l,localeOption as c}from"primereact/api";import{ComponentBase as p,useHandleStyle as d}from"primereact/componentbase";import{CSSTransition as u}from"primereact/csstransition";import{useEventListener as b,useMountEffect as f,useUpdateEffect as m,useUnmountEffect as v}from"primereact/hooks";import{TimesIcon as h}from"primereact/icons/times";import{Portal as y}from"primereact/portal";import{Ripple as g}from"primereact/ripple";function x(){return x=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},x.apply(this,arguments)}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function S(e,n){if("object"!==w(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function E(e){var n=S(e,"string");return"symbol"===w(n)?n:String(n)}function k(e){if(Array.isArray(e))return e}function O(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=o.call(t)).done)&&(s.push(r.value),s.length!==n);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function j(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function I(e,n){if(e){if("string"==typeof e)return j(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?j(e,n):void 0}}function P(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function N(e,n){return k(e)||O(e,n)||I(e,n)||P()}var C=function(r){var i,o,a,s=r.target,l=void 0===s?"document":s,c=r.type,p=r.listener,d=r.options,u=r.when,b=void 0===u||u,f=e.useRef(null),m=e.useRef(null),v=(i=d,o=e.useRef(void 0),e.useEffect((function(){o.current=i})),o.current),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.isNotEmpty(e.target)&&(y(),(e.when||b)&&(f.current=n.getTargetElement(e.target))),!m.current&&f.current&&(m.current=function(e){return p&&p(e)},f.current.addEventListener(c,m.current,d))},y=function(){m.current&&(f.current.removeEventListener(c,m.current,d),m.current=null)};return e.useEffect((function(){b?f.current=n.getTargetElement(l):(y(),f.current=null)}),[l,b]),e.useEffect((function(){!m.current||m.current===p&&v===d||(y(),b&&h())}),[p,d]),a=function(){y()},e.useEffect((function(){return a}),[]),[h,y]},R=function(n,t,r){var i=N(C({type:"keydown",listener:function(e){"Esc"!==e.key&&"Escape"!==e.key||(e.stopImmediatePropagation(),r(e))}}),2),o=i[0],a=i[1];return e.useEffect((function(){if(t&&n.current)return o(),function(){a()}})),[n,r]},T=p.extend({defaultProps:{__TYPE:"Sidebar",id:null,style:null,className:null,maskStyle:null,maskClassName:null,visible:!1,position:"left",fullScreen:!1,blockScroll:!1,baseZIndex:0,dismissable:!0,showCloseIcon:!0,closeIcon:null,ariaCloseLabel:null,closeOnEscape:!0,icons:null,modal:!0,appendTo:null,transitionOptions:null,onShow:null,onHide:null,children:void 0},css:{classes:{closeButton:"p-sidebar-close p-sidebar-icon p-link",closeIcon:"p-sidebar-close-icon",mask:function(e){var n=e.props,t=e.maskVisibleState,i=["left","right","top","bottom"].find((function(e){return e===n.position}));return r("p-sidebar-mask",i&&!n.fullScreen?"p-sidebar-".concat(i):"",{"p-component-overlay p-component-overlay-enter":n.modal,"p-sidebar-mask-scrollblocker":n.blockScroll,"p-sidebar-visible":t,"p-sidebar-full":n.fullScreen},n.maskClassName)},header:function(e){return r("p-sidebar-header",{"p-sidebar-custom-header":e.props.header})},content:"p-sidebar-content",icons:"p-sidebar-icons",root:function(e){var n=e.context;return r("p-sidebar p-component",e.props.className,{"p-input-filled":n&&"filled"===n.inputStyle||"filled"===s.inputStyle,"p-ripple-disabled":n&&!1===n.ripple||!1===s.ripple})},transition:"p-sidebar"},styles:"\n@layer primereact {\n    .p-sidebar-mask {\n        display: none;\n        justify-content: center;\n        align-items: center;\n        pointer-events: none;\n        background-color: transparent;\n        transition-property: background-color;\n    }\n    \n    .p-sidebar-visible {\n        display: flex;\n    }\n    \n    .p-sidebar-mask.p-component-overlay {\n        pointer-events: auto;\n    }\n    \n    .p-sidebar {\n        display: flex;\n        flex-direction: column;\n        pointer-events: auto;\n        transform: translate3d(0px, 0px, 0px);\n        position: relative;\n    }\n    \n    .p-sidebar-content {\n        overflow-y: auto;\n        flex-grow: 1;\n    }\n    \n    .p-sidebar-header {\n        display: flex;\n        align-items: center;\n        justify-content: flex-end;\n    }\n    \n    .p-sidebar-custom-header {\n        justify-content: space-between;\n    }\n    \n    .p-sidebar-icons {\n        display: flex;\n        align-items: center;\n        flex-shrink: 0;\n    }\n    \n    .p-sidebar-icon {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        overflow: hidden;\n        position: relative;\n    }\n    \n    .p-sidebar-full .p-sidebar {\n        transition: none;\n        transform: none;\n        width: 100vw;\n        height: 100vh;\n        max-height: 100%;\n        top: 0px;\n        left: 0px;\n    }\n    \n    /* Animation */\n    /* Top, Bottom, Left and Right */\n    .p-sidebar-top .p-sidebar-enter,\n    .p-sidebar-top .p-sidebar-exit-active {\n        transform: translate3d(0px, -100%, 0px);\n    }\n    \n    .p-sidebar-bottom .p-sidebar-enter,\n    .p-sidebar-bottom .p-sidebar-exit-active {\n        transform: translate3d(0px, 100%, 0px);\n    }\n    \n    .p-sidebar-left .p-sidebar-enter,\n    .p-sidebar-left .p-sidebar-exit-active {\n        transform: translate3d(-100%, 0px, 0px);\n    }\n    \n    .p-sidebar-right .p-sidebar-enter,\n    .p-sidebar-right .p-sidebar-exit-active {\n        transform: translate3d(100%, 0px, 0px);\n    }\n    \n    .p-sidebar-top .p-sidebar-enter-active,\n    .p-sidebar-bottom .p-sidebar-enter-active,\n    .p-sidebar-left .p-sidebar-enter-active,\n    .p-sidebar-right .p-sidebar-enter-active {\n        transform: translate3d(0px, 0px, 0px);\n        transition: all 0.3s;\n    }\n    \n    .p-sidebar-top .p-sidebar-enter-done,\n    .p-sidebar-bottom .p-sidebar-enter-done,\n    .p-sidebar-left .p-sidebar-enter-done,\n    .p-sidebar-right .p-sidebar-enter-done {\n        transform: none;\n    }\n    \n    .p-sidebar-top .p-sidebar-exit-active,\n    .p-sidebar-bottom .p-sidebar-exit-active,\n    .p-sidebar-left .p-sidebar-exit-active,\n    .p-sidebar-right .p-sidebar-exit-active {\n        transition: all 0.3s;\n    }\n    \n    /* Full */\n    .p-sidebar-full .p-sidebar-enter {\n        opacity: 0;\n        transform: scale(0.5);\n    }\n    \n    .p-sidebar-full .p-sidebar-enter-active {\n        opacity: 1;\n        transform: scale(1);\n        transition: all 0.15s cubic-bezier(0, 0, 0.2, 1);\n    }\n    \n    .p-sidebar-full .p-sidebar-enter-done {\n        transform: none;\n    }\n    \n    .p-sidebar-full .p-sidebar-exit-active {\n        opacity: 0;\n        transform: scale(0.5);\n        transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);\n    }\n    \n    /* Size */\n    .p-sidebar-left .p-sidebar {\n        width: 20rem;\n        height: 100%;\n    }\n    \n    .p-sidebar-right .p-sidebar {\n        width: 20rem;\n        height: 100%;\n    }\n    \n    .p-sidebar-top .p-sidebar {\n        height: 10rem;\n        width: 100%;\n    }\n    \n    .p-sidebar-bottom .p-sidebar {\n        height: 10rem;\n        width: 100%;\n    }\n    \n    .p-sidebar-left .p-sidebar-sm,\n    .p-sidebar-right .p-sidebar-sm {\n        width: 20rem;\n    }\n    \n    .p-sidebar-left .p-sidebar-md,\n    .p-sidebar-right .p-sidebar-md {\n        width: 40rem;\n    }\n    \n    .p-sidebar-left .p-sidebar-lg,\n    .p-sidebar-right .p-sidebar-lg {\n        width: 60rem;\n    }\n    \n    .p-sidebar-top .p-sidebar-sm,\n    .p-sidebar-bottom .p-sidebar-sm {\n        height: 10rem;\n    }\n    \n    .p-sidebar-top .p-sidebar-md,\n    .p-sidebar-bottom .p-sidebar-md {\n        height: 20rem;\n    }\n    \n    .p-sidebar-top .p-sidebar-lg,\n    .p-sidebar-bottom .p-sidebar-lg {\n        height: 30rem;\n    }\n    \n    .p-sidebar-left .p-sidebar-view,\n    .p-sidebar-right .p-sidebar-view,\n    .p-sidebar-top .p-sidebar-view,\n    .p-sidebar-bottom .p-sidebar-view {\n        width: 100%;\n        height: 100%;\n    }\n    \n    .p-sidebar-left .p-sidebar-content,\n    .p-sidebar-right .p-sidebar-content,\n    .p-sidebar-top .p-sidebar-content,\n    .p-sidebar-bottom .p-sidebar-content {\n        width: 100%;\n        height: 100%;\n    }\n    \n    @media screen and (max-width: 64em) {\n        .p-sidebar-left .p-sidebar-lg,\n        .p-sidebar-left .p-sidebar-md,\n        .p-sidebar-right .p-sidebar-lg,\n        .p-sidebar-right .p-sidebar-md {\n            width: 20rem;\n        }\n    }        \n}\n",inlineStyles:{mask:function(e){var n=e.props;return{position:"fixed",height:"100%",width:"100%",left:0,top:0,display:"flex",justifyContent:"left"===n.position?"flex-start":"right"===n.position?"flex-end":"center",alignItems:"top"===n.position?"flex-start":"bottom"===n.position?"flex-end":"center"}}}}});function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){var r,i,o;r=e,o=t[n],(i=E(i=n))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var B=e.forwardRef((function(r,p){var w=e.useContext(l),S=T.getProps(r,w),E=N(e.useState(!1),2),k=E[0],O=E[1],j=N(e.useState(!1),2),I=j[0],P=j[1],C=T.setMetaData({props:S,state:{containerVisible:k}}),A=C.ptm,B=C.cx,L=C.sx;d(T.css.styles,C.isUnstyled,{name:"sidebar"});var Z=e.useRef(null),z=e.useRef(null),M=e.useRef(null);R(z,S.closeOnEscape,(function(e){i.get(z.current)===i.getCurrent("modal",w&&w.autoZIndex||s.autoZIndex)&&X(e)}));var H=N(b({type:"click",listener:function(e){0===e.button&&V(e)&&X(e)}}),2),J=H[0],U=H[1],V=function(e){return Z&&Z.current&&!Z.current.contains(e.target)},X=function(e){S.onHide(),e.preventDefault()},_=function(){var e;S.onShow&&S.onShow(),!((e=document.activeElement)&&Z&&Z.current.contains(e))&&S.showCloseIcon&&M.current.focus(),$()},F=function(){S.modal&&n.addClass(z.current,"p-component-overlay-leave")},Y=function(){i.clear(z.current),O(!1),q()},$=function(){S.dismissable&&!S.modal&&J(),S.blockScroll&&n.blockBodyScroll()},q=function(){U(),S.blockScroll&&n.unblockBodyScroll()};e.useImperativeHandle(p,(function(){return{props:S,getElement:function(){return Z.current},gteMask:function(){return z.current},getCloseIcon:function(){return M.current}}})),f((function(){S.visible&&O(!0)})),m((function(){S.visible&&!k&&O(!0),S.visible!==I&&k&&P(S.visible)})),m((function(){k&&(i.set("modal",z.current,w&&w.autoZIndex||s.autoZIndex,S.baseZIndex||w&&w.zIndex.modal||s.zIndex.modal),P(!0))}),[k]),m((function(){I&&(U(),S.dismissable&&!S.modal&&J())}),[S.dismissable,S.modal,I]),v((function(){q(),z.current&&i.clear(z.current)}));var G,K,Q,W,ee,ne,te,re,ie,oe,ae,se=function(){var n=o({type:"button",ref:M,className:B("closeButton"),onClick:function(e){return X(e)},"aria-label":i},A("closeButton")),t=o({className:B("closeIcon")},A("closeIcon")),r=a.getJSXIcon(S.closeIcon||e.createElement(h,t),D({},t),{props:S}),i=S.ariaCloseLabel||c("close");return S.showCloseIcon?e.createElement("button",n,r,e.createElement(g,null)):null};return k&&(G=se(),K=S.icons?t.getJSXElement(S.icons,S):null,Q=S.header?t.getJSXElement(S.header,S):null,W={enter:S.fullScreen?150:300,exit:S.fullScreen?150:300},ee=o({ref:z,style:L("mask"),className:B("mask",{maskVisibleState:k}),onMouseDown:function(e){return n=e,void(S.dismissable&&S.modal&&z.current===n.target&&X(n));var n}},A("mask")),ne=o({id:S.id,className:B("root",{context:w}),style:S.style,role:"complementary"},T.getOtherProps(S),A("root")),te=o({className:B("header")},A("header")),re=o({className:B("content")},A("content")),ie=o({className:B("icons")},A("icons")),oe=o({classNames:B("transition"),in:I,timeout:W,options:S.transitionOptions,unmountOnExit:!0,onEntered:_,onExiting:F,onExited:Y},A("transition")),ae=e.createElement("div",ee,e.createElement(u,x({nodeRef:Z},oe),e.createElement("div",x({ref:Z},ne),e.createElement("div",te,Q,e.createElement("div",ie,K,G)),e.createElement("div",re,S.children)))),e.createElement(y,{element:ae,appendTo:S.appendTo,visible:!0}))}));B.displayName="Sidebar";export{B as Sidebar};
