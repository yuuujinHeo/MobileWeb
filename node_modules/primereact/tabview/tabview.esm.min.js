import*as e from"react";import{PrimeReactContext as n,ariaLabel as t}from"primereact/api";import{ComponentBase as r,useHandleStyle as a}from"primereact/componentbase";import{useMountEffect as o,useUpdateEffect as l}from"primereact/hooks";import{ChevronLeftIcon as i}from"primereact/icons/chevronleft";import{ChevronRightIcon as c}from"primereact/icons/chevronright";import{TimesIcon as s}from"primereact/icons/times";import{Ripple as u}from"primereact/ripple";import{ObjectUtils as p,classNames as b,UniqueComponentId as f,mergeProps as d,DomHandler as v,IconUtils as m}from"primereact/utils";function y(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function h(e){if(Array.isArray(e))return y(e)}function g(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function w(e,n){if(e){if("string"==typeof e)return y(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?y(e,n):void 0}}function x(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function C(e,n){if("object"!==O(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function P(e){var n=C(e,"string");return"symbol"===O(n)?n:String(n)}function S(e,n,t){return(n=P(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function E(e){if(Array.isArray(e))return e}function N(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,l,i=[],c=!0,s=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(i.push(r.value),i.length!==n);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(s)throw a}}return i}}function T(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(e,n){return E(e)||N(e,n)||w(e,n)||T()}function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){S(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var _=r.extend({defaultProps:{__TYPE:"TabView",id:null,activeIndex:0,className:null,onBeforeTabChange:null,onBeforeTabClose:null,onTabChange:null,onTabClose:null,panelContainerClassName:null,panelContainerStyle:null,renderActiveOnly:!0,scrollable:!1,style:null,children:void 0},css:{classes:{navcontent:"p-tabview-nav-content",nav:"p-tabview-nav",inkbar:"p-tabview-ink-bar",panelcontainer:function(e){return b("p-tabview-panels",e.props.panelContainerClassName)},prevbutton:"p-tabview-nav-prev p-tabview-nav-btn p-link",nextbutton:"p-tabview-nav-next p-tabview-nav-btn p-link",root:function(e){var n=e.props;return b("p-tabview p-component",{"p-tabview-scrollable":n.scrollable},n.className)},navcontainer:"p-tabview-nav-container",tab:{header:function(e){return b("p-unselectable-text",{"p-tabview-selected p-highlight":e.selected,"p-disabled":e.disabled},e.headerClassName,e._className)},headertitle:"p-tabview-title",headeraction:"p-tabview-nav-link",content:function(e){var n=e.props,t=e.selected,r=e.getTabProp,a=e.tab,o=e.isSelected,l=e.index;return!(0,e.shouldUseTab)(a,l)||n.renderActiveOnly&&!o(l)?void 0:b(r(a,"contentClassName"),r(a,"className"),"p-tabview-panel",{"p-hidden":!t})}}},styles:"\n@layer primereact {\n    .p-tabview-nav-container {\n        position: relative;\n    }\n    \n    .p-tabview-scrollable .p-tabview-nav-container {\n        overflow: hidden;\n    }\n    \n    .p-tabview-nav-content {\n        overflow-x: auto;\n        overflow-y: hidden;\n        scroll-behavior: smooth;\n        scrollbar-width: none;\n        overscroll-behavior: contain auto;\n        position: relative;\n    }\n    \n    .p-tabview-nav {\n        display: flex;\n        margin: 0;\n        padding: 0;\n        list-style-type: none;\n        flex: 1 1 auto;\n    }\n    \n    .p-tabview-nav-link {\n        cursor: pointer;\n        user-select: none;\n        display: flex;\n        align-items: center;\n        position: relative;\n        text-decoration: none;\n        overflow: hidden;\n    }\n    \n    .p-tabview-ink-bar {\n        display: none;\n        z-index: 1;\n    }\n    \n    .p-tabview-nav-link:focus {\n        z-index: 1;\n    }\n    \n    .p-tabview-close {\n        z-index: 1;\n    }\n    \n    .p-tabview-title {\n        line-height: 1;\n        white-space: nowrap;\n    }\n    \n    .p-tabview-nav-btn {\n        position: absolute;\n        top: 0;\n        z-index: 2;\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n    \n    .p-tabview-nav-prev {\n        left: 0;\n    }\n    \n    .p-tabview-nav-next {\n        right: 0;\n    }\n    \n    .p-tabview-nav-content::-webkit-scrollbar {\n        display: none;\n    }\n}\n",inlineStyles:{tab:{header:function(e){var n=e._style;return k(k({},e.headerStyle||{}),n||{})},content:function(e){var n=e.props,t=e.getTabProp,r=e.tab,a=e.isSelected,o=e.index;return!(0,e.shouldUseTab)(r,o)||n.renderActiveOnly&&!a(o)?void 0:k(k({},t(r,"contentStyle")||{}),t(r,"style")||{})}}}}}),D=r.extend({defaultProps:{__TYPE:"TabPanel",className:null,closable:!1,contentClassName:null,contentStyle:null,disabled:!1,header:null,headerClassName:null,headerStyle:null,headerTemplate:null,leftIcon:null,rightIcon:null,prevButton:null,nextButton:null,closeIcon:null,style:null,children:void 0},getCProp:function(e,n){return p.getComponentProp(e,n,D.defaultProps)},getCProps:function(e){return p.getComponentProps(e,D.defaultProps)},getCOtherProps:function(e){return p.getComponentDiffProps(e,D.defaultProps)}});function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){S(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var R=function(){},L=e.forwardRef((function(r,b){var y=e.useContext(n),O=_.getProps(r,y),C=j(e.useState(O.id),2),P=C[0],S=C[1],E=j(e.useState(!0),2),N=E[0],T=E[1],I=j(e.useState(!1),2),k=I[0],A=I[1],R=j(e.useState([]),2),L=R[0],W=R[1],J=j(e.useState(O.activeIndex),2),U=J[0],X=J[1],V=e.useRef(null),z=e.useRef(null),K=e.useRef(null),M=e.useRef(null),Y=e.useRef(null),H=e.useRef(null),$=e.useRef({}),q=O.onTabChange?O.activeIndex:U,F={props:O,state:{id:P,isPrevButtonDisabled:N,isNextButtonDisabled:k,hiddenTabsState:L,activeIndex:U}},G=_.setMetaData(B({},F)),Q=G.ptm,Z=G.ptmo,ee=G.cx,ne=G.sx;a(_.css.styles,G.isUnstyled,{name:"tabview"});var te=function(e,n){return Z(ae(e,"pt"),n,{props:e.props,parent:F})},re=function(e){return e===q},ae=function(e,n){return D.getCProp(e,n)},oe=function(e){return e&&p.isValidChild(e,"TabPanel")&&L.every((function(n){return n!==e.key}))},le=function(e,n){e.preventDefault();var t,r=O.onBeforeTabClose,a=O.onTabClose,o=O.children[n].key;r&&!1===r({originalEvent:e,index:n})||(W([].concat(h(t=L)||g(t)||w(t)||x(),[o])),a&&a({originalEvent:e,index:n}))},ie=function(e,n,t){if(e&&e.preventDefault(),!ae(n,"disabled")){if(O.onBeforeTabChange&&!1===O.onBeforeTabChange({originalEvent:e,index:t}))return;O.onTabChange?O.onTabChange({originalEvent:e,index:t}):X(t)}se(t)},ce=function(e,n,t){"Enter"===e.key&&ie(e,n,t)},se=function(e){var n=$.current["tab_".concat(e)];n&&n.scrollIntoView&&n.scrollIntoView({block:"nearest"})},ue=function(e){var n,t,r,a;O.scrollable&&(t=(n=z.current).scrollLeft,r=n.scrollWidth,a=v.getWidth(z.current),T(0===t),A(t===r-a)),e.preventDefault()},pe=function(){return[Y.current,H.current].reduce((function(e,n){return n?e+v.getWidth(n):e}),0)},be=function(){T(!0),A(!1),W([]),O.onTabChange?O.onTabChange({index:q}):X(O.activeIndex)};e.useEffect((function(){var e;e=$.current["tab_".concat(q)],M.current.style.width=v.getWidth(e)+"px",M.current.style.left=v.getOffset(e).left-v.getOffset(K.current).left+"px"})),o((function(){P||S(f())})),l((function(){if(p.isNotEmpty(L)){var n=(t=L[L.length-1],(r=e.Children.map(O.children,(function(e,n){if(oe(e))return{tab:e,index:n}}))).find((function(e){var n=e.index;return!ae(e.tab,"disabled")&&n>=t}))||r.reverse().find((function(e){var n=e.index;return!ae(e.tab,"disabled")&&t>n})));n&&ie(null,n.tab,n.index)}var t,r}),[L]),l((function(){O.activeIndex!==U&&se(O.activeIndex)}),[O.activeIndex]),e.useImperativeHandle(b,(function(){return{props:O,reset:be,getElement:function(){return V.current}}}));var fe,de,ve,me,ye,he,ge,we,xe,Oe=function(n,t){var r=re(t),a=D.getCProps(n),o=a.headerStyle,l=a.headerClassName,i=a.style,c=a.className,b=a.disabled,f=a.leftIcon,v=a.rightIcon,y=a.header,h=a.headerTemplate,g=a.closable,w=a.closeIcon,x=P+"_header_"+t,C=P+"_content_"+t,S=b?null:0,E=f&&m.getJSXIcon(f,void 0,{props:O}),N=d({className:ee("tab.headertitle")},te(n,"headertitle")),T=e.createElement("span",N,y),j=v&&m.getJSXIcon(v,void 0,{props:O}),I="p-tabview-close",k=g?m.getJSXIcon(w||e.createElement(s,{className:I,onClick:function(e){return le(e,t)}}),{className:I,onClick:function(e){return le(e,t)}},{props:O}):null,_=d({id:x,role:"tab",className:ee("tab.headeraction"),tabIndex:S,"aria-controls":C,"aria-selected":r,onClick:function(e){return ie(e,n,t)},onKeyDown:function(e){return ce(e,n,t)}},te(n,"headeraction")),A=e.createElement("a",_,E,T,j,k,e.createElement(u,null));h&&(A=p.getJSXElement(h,{className:"p-tabview-nav-link",titleClassName:"p-tabview-title",onClick:function(e){return ie(e,n,t)},onKeyDown:function(e){return ce(e,n,t)},leftIconElement:E,titleElement:T,rightIconElement:j,element:A,props:O,index:t,selected:r,ariaControls:C}));var B=d({ref:function(e){return $.current["tab_".concat(t)]=e},className:ee("tab.header",{selected:r,disabled:b,headerClassName:l,_className:c}),style:ne("tab.header",{headerStyle:o,_style:i}),role:"presentation"},te(n,"root"),te(n,"header"));return e.createElement("li",B,A)},Ce=d({id:P,ref:V,style:O.style,className:ee("root")},_.getOtherProps(O),Q("root")),Pe=d({className:ee("navcontainer")},Q("navcontainer")),Se=(fe=e.Children.map(O.children,(function(e,n){if(oe(e))return Oe(e,n)})),de=d({id:P,ref:z,className:ee("navcontent"),style:O.style,onScroll:ue},Q("navcontent")),ve=d({ref:K,className:ee("nav"),role:"tablist"},Q("nav")),me=d({ref:M,className:ee("inkbar")},Q("inkbar")),e.createElement("div",de,e.createElement("ul",ve,fe,e.createElement("li",me)))),Ee=(ye=d({className:ee("panelcontainer"),style:O.panelContainerStyle},Q("panelcontainer")),he=e.Children.map(O.children,(function(n,t){if(oe(n)&&(!O.renderActiveOnly||re(t))){var r=re(t),a=P+"_header_"+t,o=d({id:P+"_content_"+t,className:ee("tab.content",{props:O,selected:r,getTabProp:ae,tab:n,isSelected:re,shouldUseTab:oe,index:t}),style:ne("tab.content",{props:O,getTabProp:ae,tab:n,isSelected:re,shouldUseTab:oe,index:t}),role:"tabpanel","aria-labelledby":a,"aria-hidden":!r},D.getCOtherProps(n),te(n,"root"),te(n,"content"));return e.createElement("div",o,O.renderActiveOnly?r&&ae(n,"children"):ae(n,"children"))}})),e.createElement("div",ye,he)),Ne=(ge=d(Q("previcon")),we=m.getJSXIcon(O.prevButton||e.createElement(i,ge),B({},ge),{props:O}),xe=d({ref:Y,type:"button",className:ee("prevbutton"),"aria-label":t("previousPageLabel"),onClick:function(e){return n=v.getWidth(z.current)-pe(),void(z.current.scrollLeft=(t=z.current.scrollLeft-n)<=0?0:t);var n,t}},Q("prevbutton")),O.scrollable&&!N?e.createElement("button",xe,we,e.createElement(u,null)):null),Te=function(){var n=d({"aria-hidden":"true"},Q("nexticon")),r=m.getJSXIcon(O.nextButton||e.createElement(c,n),B({},n),{props:O}),a=d({ref:H,type:"button",className:ee("nextbutton"),"aria-label":t("nextPageLabel"),onClick:function(e){return n=v.getWidth(z.current)-pe(),void(z.current.scrollLeft=(t=z.current.scrollLeft+n)>=(r=z.current.scrollWidth-n)?r:t);var n,t,r}},Q("nextbutton"));if(O.scrollable&&!k)return e.createElement("button",a,r,e.createElement(u,null))}();return e.createElement("div",Ce,e.createElement("div",Pe,Ne,Se,Te),Ee)}));R.displayName="TabPanel",L.displayName="TabView";export{R as TabPanel,L as TabView};
