"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),n=require("primereact/api"),t=require("primereact/componentbase"),r=require("primereact/icons/search"),o=require("primereact/icons/spinner"),l=require("primereact/utils"),a=require("primereact/icons/check"),i=require("primereact/icons/chevrondown"),c=require("primereact/icons/chevronright"),s=require("primereact/icons/minus"),d=require("primereact/ripple");function p(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var u=p(e);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},f.apply(this,arguments)}function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function m(e){if(Array.isArray(e))return g(e)}function y(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e,n){if(e){if("string"==typeof e)return g(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?g(e,n):void 0}}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function x(e,n){if("object"!==b(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function S(e){var n=x(e,"string");return"symbol"===b(n)?n:String(n)}function C(e,n,t){return(n=S(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function k(e){if(Array.isArray(e))return e}function E(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,l,a,i=[],c=!0,s=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=l.call(t)).done)&&(i.push(r.value),i.length!==n);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(s)throw o}}return i}}function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(e,n){return k(e)||E(e,n)||h(e,n)||D()}var I=t.ComponentBase.extend({defaultProps:{__TYPE:"Tree",__parentMetadata:null,id:null,value:null,checkboxIcon:null,disabled:!1,selectionMode:null,selectionKeys:null,onSelectionChange:null,contextMenuSelectionKey:null,onContextMenuSelectionChange:null,expandedKeys:null,style:null,className:null,contentStyle:null,contentClassName:null,metaKeySelection:!0,propagateSelectionUp:!0,propagateSelectionDown:!0,loading:!1,loadingIcon:null,expandIcon:null,collapseIcon:null,dragdropScope:null,header:null,footer:null,showHeader:!0,filter:!1,filterIcon:null,filterValue:null,filterBy:"label",filterMode:"lenient",filterPlaceholder:null,filterLocale:void 0,filterTemplate:null,nodeTemplate:null,togglerTemplate:null,onSelect:null,onUnselect:null,onExpand:null,onCollapse:null,onToggle:null,onDragDrop:null,onContextMenu:null,onFilterValueChange:null,onNodeClick:null,onNodeDoubleClick:null,children:void 0},css:{classes:{container:"p-tree-container",loadingIcon:"p-tree-loading-icon",loadingOverlay:"p-tree-loading-overlay p-component-overlay",searchIcon:"p-tree-filter-icon",filterContainer:"p-tree-filter-container",input:"p-tree-filter p-inputtext p-component",header:"p-tree-header",footer:"p-tree-footer",root:function(e){var n=e.props;return l.classNames("p-tree p-component",{"p-tree-selectable":n.selectionMode,"p-tree-loading":n.loading,"p-disabled":n.disabled})},label:"p-treenode-label",checkboxIcon:"p-checkbox-icon p-c",checkboxContainer:"p-checkbox p-component",checkbox:function(e){return l.classNames("p-checkbox-box",{"p-highlight":e.checked,"p-indeterminate":e.partialChecked,"p-disabled":e.nodeProps.disabled})},nodeIcon:"p-treenode-icon",togglerIcon:"p-tree-toggler-icon",toggler:"p-tree-toggler p-link",droppoint:"p-treenode-droppoint",content:function(e){var n=e.nodeProps,t=e.checked,r=e.selected;return l.classNames("p-treenode-content",{"p-treenode-selectable":n.selectionMode&&!1!==n.node.selectable,"p-highlight":(0,e.isCheckboxSelectionMode)()?t:r,"p-highlight-contextmenu":n.contextMenuSelectionKey&&n.contextMenuSelectionKey===n.node.key,"p-disabled":n.disabled})},subgroup:"p-treenode-children",node:function(e){return l.classNames("p-treenode",{"p-treenode-leaf":e.isLeaf})}},styles:"\n@layer primereact {\n    .p-tree-container {\n        margin: 0;\n        padding: 0;\n        list-style-type: none;\n        overflow: auto;\n    }\n    \n    .p-treenode-children {\n        margin: 0;\n        padding: 0;\n        list-style-type: none;\n    }\n    \n    .p-treenode-selectable {\n        cursor: pointer;\n        user-select: none;\n    }\n    \n    .p-tree-toggler {\n        cursor: pointer;\n        user-select: none;\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        flex-shrink: 0;\n        overflow: hidden;\n        position: relative;\n    }\n    \n    .p-treenode-leaf > .p-treenode-content .p-tree-toggler {\n        visibility: hidden;\n    }\n    \n    .p-treenode-content {\n        display: flex;\n        align-items: center;\n    }\n    \n    .p-tree-filter {\n        width: 100%;\n    }\n    \n    .p-tree-filter-container {\n        position: relative;\n        display: block;\n        width: 100%;\n    }\n    \n    .p-tree-filter-icon {\n        position: absolute;\n        top: 50%;\n        margin-top: -.5rem;\n    }\n    \n    .p-tree-loading {\n        position: relative;\n        min-height: 4rem;\n    }\n    \n    .p-tree .p-tree-loading-overlay {\n        position: absolute;\n        z-index: 1;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n}\n"}});function P(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=N(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){i=!0,l=e},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw l}}}}function N(e,n){if(e){if("string"==typeof e)return w(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?w(e,n):void 0}}function w(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function K(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(Object(t),!0).forEach((function(n){C(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var T=u.memo((function(e){var t,r,o,p,f,g,m,y=u.useRef(null),h=u.useRef(!1),v=e.isNodeLeaf(e.node),b=!!e.expandedKeys&&void 0!==e.expandedKeys[e.node.key]||e.node.expanded,x=e.ptm,S=e.cx,C=function(n){return x(n,{hostName:e.hostName,context:{selected:!_()&&q(),expanded:b||!1,checked:!!_()&&F(),isLeaf:v}})},k=function(n){var t=e.expandedKeys?K({},e.expandedKeys):{};t[e.node.key]=!0,e.onToggle({originalEvent:n,value:t}),O(n,!0)},E=function(n){var t=K({},e.expandedKeys);delete t[e.node.key],e.onToggle({originalEvent:n,value:t}),O(n,!1)},D=function(n){e.disabled||(b?E(n):k(n),n.preventDefault(),n.stopPropagation())},O=function(n,t){t?e.onExpand&&e.onExpand({originalEvent:n,node:e.node}):e.onCollapse&&e.onCollapse({originalEvent:n,node:e.node})},I=function(n){if(!e.disabled){var t=n.target.parentElement;if(l.DomHandler.hasClass(t,"p-treenode"))switch(n.which){case 40:var r=t.children[1];if(r)M(r.children[0]);else{for(var o=t.nextElementSibling;o&&l.DomHandler.hasClass(o,"p-treenode-droppoint");)o=o.nextElementSibling;if(o)M(o);else{var a=N(t);a&&M(a)}}n.preventDefault();break;case 38:if(t.previousElementSibling)M(w(t.previousElementSibling));else{var i=j(t);i&&M(i)}n.preventDefault();break;case 39:b||k(n),n.preventDefault();break;case 37:b&&E(n),n.preventDefault();break;case 13:U(n),n.preventDefault()}}},N=function e(n){var t=j(n);return t?t.nextElementSibling||e(t):null},w=function e(n){var t=n.children[1];return t?e(t.children[t.children.length-1]):n},j=function(e){var n=e.parentElement.parentElement;return l.DomHandler.hasClass(n,"p-treenode")?n:null},M=function(e){e&&e.children[0]&&e.children[0].focus()},U=function(n){e.onClick&&e.onClick({originalEvent:n,node:e.node});var t=n.target.nodeName;if(!e.disabled&&"INPUT"!==t&&"BUTTON"!==t&&"A"!==t&&!l.DomHandler.hasClass(n.target,"p-clickable")){if(e.selectionMode&&!1!==e.node.selectable){var r;if(_()){var o=F();r=e.selectionKeys?K({},e.selectionKeys):{},o?(e.propagateSelectionDown?R(e.node,!1,r):delete r[e.node.key],e.propagateSelectionUp&&e.onPropagateUp&&e.onPropagateUp({originalEvent:n,check:!1,selectionKeys:r}),e.onUnselect&&e.onUnselect({originalEvent:n,node:e.node})):(e.propagateSelectionDown?R(e.node,!0,r):r[e.node.key]={checked:!0},e.propagateSelectionUp&&e.onPropagateUp&&e.onPropagateUp({originalEvent:n,check:!0,selectionKeys:r}),e.onSelect&&e.onSelect({originalEvent:n,node:e.node}))}else{var a=q();if(!h.current&&e.metaKeySelection){var i=n.metaKey||n.ctrlKey;a&&i?(J()?r=null:delete(r=K({},e.selectionKeys))[e.node.key],e.onUnselect&&e.onUnselect({originalEvent:n,node:e.node})):(J()?r=e.node.key:X()&&((r=i&&e.selectionKeys?K({},e.selectionKeys):{})[e.node.key]=!0),e.onSelect&&e.onSelect({originalEvent:n,node:e.node}))}else J()?a?(r=null,e.onUnselect&&e.onUnselect({originalEvent:n,node:e.node})):(r=e.node.key,e.onSelect&&e.onSelect({originalEvent:n,node:e.node})):a?(delete(r=K({},e.selectionKeys))[e.node.key],e.onUnselect&&e.onUnselect({originalEvent:n,node:e.node})):((r=e.selectionKeys?K({},e.selectionKeys):{})[e.node.key]=!0,e.onSelect&&e.onSelect({originalEvent:n,node:e.node}))}e.onSelectionChange&&e.onSelectionChange({originalEvent:n,value:r})}h.current=!1}},L=function(n){e.onDoubleClick&&e.onDoubleClick({originalEvent:n,node:e.node})},A=function(n){e.disabled||(l.DomHandler.clearSelection(),e.onContextMenuSelectionChange&&e.onContextMenuSelectionChange({originalEvent:n,value:e.node.key}),e.onContextMenu&&e.onContextMenu({originalEvent:n,node:e.node}))},H=function(n){var t,r=n.check,o=n.selectionKeys,a=P(e.node.children);try{for(a.s();!(t=a.n()).done;){var i=t.value;o[i.key]&&o[i.key].checked&&0}}catch(e){a.e(e)}finally{a.f()}var c=e.node.key,s=l.ObjectUtils.findChildrenByKey(e.originalOptions,c),d=s.some((function(e){return e.key in o})),p=s.every((function(e){return e.key in o&&o[e.key].checked}));d&&!p?o[c]={checked:!1,partialChecked:!0}:p?o[c]={checked:!0,partialChecked:!1}:r?o[c]={checked:!1,partialChecked:!1}:delete o[c],e.propagateSelectionUp&&e.onPropagateUp&&e.onPropagateUp(n)},R=function e(n,t,r){if(t?r[n.key]={checked:!0,partialChecked:!1}:delete r[n.key],n.children&&n.children.length)for(var o=0;o<n.children.length;o++)e(n.children[o],t,r)},q=function(){return!(!e.selectionMode||!e.selectionKeys)&&(J()?e.selectionKeys===e.node.key:void 0!==e.selectionKeys[e.node.key])},F=function(){return!!e.selectionKeys&&(e.selectionKeys[e.node.key]&&e.selectionKeys[e.node.key].checked)||!1},J=function(){return e.selectionMode&&"single"===e.selectionMode},X=function(){return e.selectionMode&&"multiple"===e.selectionMode},_=function(){return e.selectionMode&&"checkbox"===e.selectionMode},V=function(){h.current=!0},B=function(n,t){(n.preventDefault(),!1!==e.node.droppable)&&(l.DomHandler.removeClass(n.target,"p-treenode-droppoint-active"),e.onDropPoint&&e.onDropPoint({originalEvent:n,path:e.path,index:-1===t?e.index:e.index+1,position:t}))},$=function(n){n.dataTransfer.types[1]===e.dragdropScope.toLocaleLowerCase()&&(n.dataTransfer.dropEffect="move",n.preventDefault())},z=function(n){n.dataTransfer.types[1]===e.dragdropScope.toLocaleLowerCase()&&l.DomHandler.addClass(n.target,"p-treenode-droppoint-active")},Y=function(n){n.dataTransfer.types[1]===e.dragdropScope.toLocaleLowerCase()&&l.DomHandler.removeClass(n.target,"p-treenode-droppoint-active")},G=function(n){e.dragdropScope&&!1!==e.node.droppable&&(l.DomHandler.removeClass(y.current,"p-treenode-dragover"),n.preventDefault(),n.stopPropagation(),e.onDrop&&e.onDrop({originalEvent:n,path:e.path,index:e.index}))},Q=function(n){n.dataTransfer.types[1]===e.dragdropScope.toLocaleLowerCase()&&!1!==e.node.droppable&&(n.dataTransfer.dropEffect="move",n.preventDefault(),n.stopPropagation())},W=function(n){n.dataTransfer.types[1]===e.dragdropScope.toLocaleLowerCase()&&!1!==e.node.droppable&&l.DomHandler.addClass(y.current,"p-treenode-dragover")},Z=function(n){if(n.dataTransfer.types[1]===e.dragdropScope.toLocaleLowerCase()&&!1!==e.node.droppable){var t=n.currentTarget.getBoundingClientRect();(n.nativeEvent.x>t.left+t.width||n.nativeEvent.x<t.left||n.nativeEvent.y>=Math.floor(t.top+t.height)||n.nativeEvent.y<t.top)&&l.DomHandler.removeClass(y.current,"p-treenode-dragover")}},ee=function(n){n.dataTransfer.setData("text",e.dragdropScope),n.dataTransfer.setData(e.dragdropScope,e.dragdropScope),e.onDragStart&&e.onDragStart({originalEvent:n,path:e.path,index:e.index})},ne=function(n){e.onDragEnd&&e.onDragEnd({originalEvent:n})},te=function(){var n=l.mergeProps({className:S("label")},C("label")),t=u.createElement("span",n,e.node.label);e.nodeTemplate&&(t=l.ObjectUtils.getJSXElement(e.nodeTemplate,e.node,{onTogglerClick:D,className:"p-treenode-label",element:t,props:e,expanded:b}));return t},re=function(){if(_()&&!1!==e.node.selectable){var n=F(),t=!!e.selectionKeys&&e.selectionKeys[e.node.key]&&e.selectionKeys[e.node.key].partialChecked,r=l.mergeProps({className:S("checkboxIcon")},C("checkboxIcon")),o=l.IconUtils.getJSXIcon(n?e.checkboxIcon||u.createElement(a.CheckIcon,r):t?e.checkboxIcon||u.createElement(s.MinusIcon,r):null,K({},r),e),i=l.mergeProps({className:S("checkboxContainer")},C("checkboxContainer")),c=l.mergeProps({className:S("checkbox",{checked:n,partialChecked:t,nodeProps:e}),role:"checkbox","aria-checked":n},C("checkbox"));return u.createElement("div",i,u.createElement("div",c,o))}return null},oe=function(){var n=e.node.icon||(b?e.node.expandedIcon:e.node.collapsedIcon);if(n){var t=l.mergeProps({className:l.classNames(n,S("nodeIcon"))},C("nodeIcon"));return u.createElement("span",t)}return null},le=function(){var t=n.ariaLabel(b?"collapseLabel":"expandLabel"),r=l.mergeProps({className:S("togglerIcon"),"aria-hidden":!0},C("togglerIcon")),o=l.IconUtils.getJSXIcon(b?e.collapseIcon||u.createElement(i.ChevronDownIcon,r):e.expandIcon||u.createElement(c.ChevronRightIcon,r),K({},r),{props:e,expanded:b}),a=l.mergeProps({type:"button",className:S("toggler"),tabIndex:-1,onClick:D,"aria-label":t},C("toggler")),s=u.createElement("button",a,o,u.createElement(d.Ripple,null));e.togglerTemplate&&(s=l.ObjectUtils.getJSXElement(e.togglerTemplate,e.node,{onClick:D,containerClassName:"p-tree-toggler p-link",iconClassName:"p-tree-toggler-icon",element:s,props:e,expanded:b}));return s},ae=function(n){if(e.dragdropScope){var t=l.mergeProps({className:S("droppoint"),onDrop:function(e){return B(e,n)},onDragOver:$,onDragEnter:z,onDragLeave:Y},C("droppoint"));return u.createElement("li",t)}return null},ie=function(){var n=q(),t=F(),r=le(),o=re(),a=oe(),i=te(),c=l.mergeProps({ref:y,className:l.classNames(e.node.className,S("content",{checked:t,selected:n,nodeProps:e,isCheckboxSelectionMode:_})),style:e.node.style,onClick:U,onDoubleClick:L,onContextMenu:A,onTouchEnd:V,draggable:e.dragdropScope&&!1!==e.node.draggable&&!e.disabled,onDrop:G,onDragOver:Q,onDragEnter:W,onDragLeave:Z,onDragStart:ee,onDragEnd:ne,onKeyDown:I},C("content"));return u.createElement("div",c,r,o,a,i)},ce=(r=e.disabled?void 0:0,o=q(),p=F(),f=ie(),t=l.mergeProps({className:S("subgroup"),role:"group"},C("subgroup")),g=l.ObjectUtils.isNotEmpty(e.node.children)&&b?u.createElement("ul",t,e.node.children.map((function(n,t){return u.createElement(T,{key:n.key||n.label,node:n,checkboxIcon:e.checkboxIcon,collapseIcon:e.collapseIcon,contextMenuSelectionKey:e.contextMenuSelectionKey,cx:S,disabled:e.disabled,dragdropScope:e.dragdropScope,expandIcon:e.expandIcon,expandedKeys:e.expandedKeys,index:t,isNodeLeaf:e.isNodeLeaf,last:t===e.node.children.length-1,metaKeySelection:e.metaKeySelection,nodeTemplate:e.nodeTemplate,onClick:e.onClick,onCollapse:e.onCollapse,onContextMenu:e.onContextMenu,onContextMenuSelectionChange:e.onContextMenuSelectionChange,onDoubleClick:e.onDoubleClick,onDragEnd:e.onDragEnd,onDragStart:e.onDragStart,onDrop:e.onDrop,onDropPoint:e.onDropPoint,onExpand:e.onExpand,onPropagateUp:H,onSelect:e.onSelect,onSelectionChange:e.onSelectionChange,onToggle:e.onToggle,onUnselect:e.onUnselect,originalOptions:e.originalOptions,parent:e.node,path:e.path+"-"+t,propagateSelectionDown:e.propagateSelectionDown,propagateSelectionUp:e.propagateSelectionUp,ptm:x,selectionKeys:e.selectionKeys,selectionMode:e.selectionMode,togglerTemplate:e.togglerTemplate})}))):null,m=l.mergeProps({className:l.classNames(e.node.className,S("node",{isLeaf:v})),style:e.node.style,tabIndex:r,role:"treeitem","aria-posinset":e.index+1,"aria-expanded":b,"aria-selected":p||o},C("node")),u.createElement("li",m,f,g));if(e.dragdropScope&&!e.disabled){var se=ae(-1),de=e.last?ae(1):null;return u.createElement(u.Fragment,null,se,ce,de)}return ce}));function M(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function U(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?M(Object(t),!0).forEach((function(n){C(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function L(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=A(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){i=!0,l=e},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw l}}}}function A(e,n){if(e){if("string"==typeof e)return H(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?H(e,n):void 0}}function H(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}T.displayName="UITreeNode";var R=u.memo(u.forwardRef((function(e,a){var i=u.useContext(n.PrimeReactContext),c=I.getProps(e,i),s=O(u.useState(""),2),d=s[0],p=s[1],g=O(u.useState(c.expandedKeys),2),b=g[0],x=g[1],S=u.useRef(null),C=u.useRef([]),k=u.useRef(null),E=u.useRef(!1),D=c.onFilterValueChange?c.filterValue:d,P=c.onToggle?c.expandedKeys:b,N=I.setMetaData({props:c,state:{filterValue:D,expandedKeys:P}}),w=N.ptm,j=N.cx;t.useHandleStyle(I.css.styles,N.isUnstyled,{name:"tree"});var K={filter:function(e){return Y(e)},reset:function(){return ee()}},M=function(e){c.onToggle?c.onToggle(e):x(e.value)},A=function(e){k.current={path:e.path,index:e.index}},H=function(){k.current=null},R=function e(n){if(Array.isArray(n))return n.map(e);if(n&&Object.getPrototypeOf(n)===Object.prototype){var t={};for(var r in n)t[r]="data"!==r?e(n[r]):n[r];return t}return n},q=function(e){if(X(k.current.path,e.path)){var n=R(c.value),t=k.current.path.split("-");t.pop();var r=B(n,t),o=r?r.children[k.current.index]:n[k.current.index],l=B(n,e.path.split("-"));l.children?l.children.push(o):l.children=[o],r?r.children.splice(k.current.index,1):n.splice(k.current.index,1),c.onDragDrop&&c.onDragDrop({originalEvent:e.originalEvent,value:n,dragNode:o,dropNode:l,dropIndex:e.index})}},F=function(e){if(_(e)){var n=R(c.value),t=k.current.path.split("-");t.pop();var r=e.path.split("-");r.pop();var o=B(n,t),l=B(n,r),a=o?o.children[k.current.index]:n[k.current.index],i=V(k.current.path,e.path);if(o?o.children.splice(k.current.index,1):n.splice(k.current.index,1),e.position<0){var s=i?k.current.index>e.index?e.index:e.index-1:e.index;l?l.children.splice(s,0,a):n.splice(s,0,a)}else l?l.children.push(a):n.push(a);c.onDragDrop&&c.onDragDrop({originalEvent:e.originalEvent,value:n,dragNode:a,dropNode:l,dropIndex:e.index})}},J=function(e,n){return!!e&&(e!==n&&0!==n.indexOf(e))},X=function(e,n){return!!J(e,n)&&!(e.indexOf("-")>0&&e.substring(0,e.lastIndexOf("-"))===n)},_=function(e){return!!J(k.current.path,e.path)&&(-1!==e.position||!V(k.current.path,e.path)||k.current.index+1!==e.index)},V=function(e,n){return 1===e.length&&1===n.length||e.substring(0,e.lastIndexOf("-"))===n.substring(0,n.lastIndexOf("-"))},B=function e(n,t){if(0===t.length)return null;var r=parseInt(t[0],10),o=n.children?n.children[r]:n[r];return 1===t.length?o:(t.shift(),e(o,t))},$=function(e){return!1!==e.leaf&&!(e.children&&e.children.length)},z=function(e){13===e.which&&e.preventDefault()},Y=function(e){E.current=!0;var n=e.target.value;c.onFilterValueChange?c.onFilterValueChange({originalEvent:e,value:n}):p(n)},G=function(e){p(l.ObjectUtils.isNotEmpty(e)?e:""),Q()},Q=function(){if(E.current){if(l.ObjectUtils.isEmpty(D))C.current=c.value;else{C.current=[];var e,n=c.filterBy.split(","),t=D.toLocaleLowerCase(c.filterLocale),r="strict"===c.filterMode,o=L(c.value);try{for(o.s();!(e=o.n()).done;){var a=U({},e.value),i={searchFields:n,filterText:t,isStrictMode:r};(r&&(W(a,i)||Z(a,i))||!r&&(Z(a,i)||W(a,i)))&&C.current.push(a)}}catch(e){o.e(e)}finally{o.f()}}E.current=!1}},W=function(e,n){if(e){var t=!1;if(e.children){var r=m(i=e.children)||y(i)||h(i)||v();e.children=[];var o,l=L(r);try{for(l.s();!(o=l.n()).done;){var a=U({},o.value);Z(a,n)&&(t=!0,e.children.push(a))}}catch(e){l.e(e)}finally{l.f()}}if(t)return e.expanded=!0,!0}var i},Z=function(e,n){var t,r=n.searchFields,o=n.filterText,a=n.isStrictMode,i=!1,s=L(r);try{for(s.s();!(t=s.n()).done;){String(l.ObjectUtils.resolveFieldData(e,t.value)).toLocaleLowerCase(c.filterLocale).indexOf(o)>-1&&(i=!0)}}catch(e){s.e(e)}finally{s.f()}return(!i||a&&!$(e))&&(i=W(e,{searchFields:r,filterText:o,isStrictMode:a})||i),i},ee=function(){p("")};u.useImperativeHandle(a,(function(){return{props:c,filter:G,getElement:function(){return S.current}}}));var ne=function(e,n,t){return u.createElement(T,{hostName:"Tree",key:e.key||e.label,node:e,checkboxIcon:c.checkboxIcon,collapseIcon:c.collapseIcon,contextMenuSelectionKey:c.contextMenuSelectionKey,cx:j,disabled:c.disabled,dragdropScope:c.dragdropScope,expandIcon:c.expandIcon,expandedKeys:P,index:n,isNodeLeaf:$,last:t,metaKeySelection:c.metaKeySelection,nodeTemplate:c.nodeTemplate,onClick:c.onNodeClick,onCollapse:c.onCollapse,onContextMenu:c.onContextMenu,onContextMenuSelectionChange:c.onContextMenuSelectionChange,onDoubleClick:c.onNodeDoubleClick,onDragEnd:H,onDragStart:A,onDrop:q,onDropPoint:F,onExpand:c.onExpand,onSelect:c.onSelect,onSelectionChange:c.onSelectionChange,onToggle:M,onUnselect:c.onUnselect,originalOptions:c.value,path:String(n),propagateSelectionDown:c.propagateSelectionDown,propagateSelectionUp:c.propagateSelectionUp,ptm:w,selectionKeys:c.selectionKeys,selectionMode:c.selectionMode,togglerTemplate:c.togglerTemplate})},te=function(){c.filter&&(E.current=!0,Q());var e=c.filter&&C.current?C.current:c.value;return e.map((function(n,t){return ne(n,t,t===e.length-1)}))},re=function(){if(c.filter){var e=l.ObjectUtils.isNotEmpty(D)?D:"",n=l.mergeProps({className:j("searchIcon")},w("searchIcon")),t=l.IconUtils.getJSXIcon(c.filterIcon||u.createElement(r.SearchIcon,n),U({},n),{props:c}),o=l.mergeProps({className:j("filterContainer")},w("filterContainer")),a=l.mergeProps({type:"text",value:e,autoComplete:"off",className:j("input"),placeholder:c.filterPlaceholder,"aria-label":c.filterPlaceholder,onKeyDown:z,onChange:Y,disabled:c.disabled},w("input")),i=u.createElement("div",o,u.createElement("input",a),t);if(c.filterTemplate)i=l.ObjectUtils.getJSXElement(c.filterTemplate,{className:"p-tree-filter-container",element:i,filterOptions:K,filterInputKeyDown:z,filterInputChange:Y,filterIconClassName:"p-dropdown-filter-icon",props:c});return u.createElement(u.Fragment,null,i)}return null},oe=I.getOtherProps(c),le=l.ObjectUtils.reduceKeys(oe,l.DomHandler.ARIA_PROPS),ae=function(){if(c.loading){var e=l.mergeProps({className:j("loadingIcon")},w("loadingIcon")),n=c.loadingIcon||u.createElement(o.SpinnerIcon,f({},e,{spin:!0})),t=l.IconUtils.getJSXIcon(n,U({},e),{props:c}),r=l.mergeProps({className:j("loadingOverlay")},w("loadingOverlay"));return u.createElement("div",r,t)}return null}(),ie=function(){if(c.value){var e=te(),n=l.mergeProps(U({className:l.classNames(c.contentClassName,j("container")),role:"tree",style:c.contentStyle},le),w("container"));return u.createElement("ul",n,e)}return null}(),ce=function(){if(c.showHeader){var e=re(),n=e;if(c.header)n=l.ObjectUtils.getJSXElement(c.header,{filterContainerClassName:"p-tree-filter-container",filterIconClassName:"p-tree-filter-icon",filterInput:{className:"p-tree-filter p-inputtext p-component",onKeyDown:z,onChange:Y},filterElement:e,element:n,props:c});var t=l.mergeProps({className:j("header")},w("header"));return u.createElement("div",t,n)}return null}(),se=function(){var e=l.ObjectUtils.getJSXElement(c.footer,c),n=l.mergeProps({className:j("footer")},w("footer"));return u.createElement("div",n,e)}(),de=l.mergeProps({ref:S,className:l.classNames(c.className,j("root")),style:c.style,id:c.id},I.getOtherProps(c),w("root"));return u.createElement("div",de,ae,ce,ie,se)})));R.displayName="Tree",exports.Tree=R;
