import*as e from"react";import{PrimeReactContext as n}from"primereact/api";import{ComponentBase as t,useHandleStyle as r}from"primereact/componentbase";import{CSSTransition as a}from"primereact/csstransition";import{useMountEffect as i,useUpdateEffect as o}from"primereact/hooks";import{ChevronDownIcon as l}from"primereact/icons/chevrondown";import{ChevronRightIcon as u}from"primereact/icons/chevronright";import{classNames as c,mergeProps as m,IconUtils as s,ObjectUtils as p,UniqueComponentId as f}from"primereact/utils";function d(){return d=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},d.apply(this,arguments)}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function y(e,n){if("object"!==b(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function v(e){var n=y(e,"string");return"symbol"===b(n)?n:String(n)}function g(e,n,t){return(n=v(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function h(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function O(e){if(Array.isArray(e))return h(e)}function x(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function E(e,n){if(e){if("string"==typeof e)return h(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?h(e,n):void 0}}function N(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(e){return O(e)||x(e)||E(e)||N()}function S(e){if(Array.isArray(e))return e}function P(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,o,l=[],u=!0,c=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=i.call(t)).done)&&(l.push(r.value),l.length!==n);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}function I(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,n){return S(e)||P(e,n)||E(e,n)||I()}var C=t.extend({defaultProps:{__TYPE:"PanelMenu",id:null,model:null,style:null,submenuIcon:null,className:null,multiple:!1,transitionOptions:null,children:void 0},css:{classes:{headerIcon:function(e){return c("p-menuitem-icon",e.item.icon)},headerSubmenuIcon:"p-panelmenu-icon",headerLabel:"p-menuitem-text",headerAction:"p-panelmenu-header-link",panel:function(e){return c("p-panelmenu-panel",e.item.className)},header:function(e){var n=e.item;return c("p-component p-panelmenu-header",{"p-highlight":e.active&&!!n.items,"p-disabled":n.disabled})},menuContent:"p-panelmenu-content",root:function(e){return c("p-panelmenu p-component",e.props.className)},separator:"p-menu-separator",toggleableContent:function(e){return c("p-toggleable-content",{"p-toggleable-content-collapsed":!e.active})},icon:function(e){return c("p-menuitem-icon",e.item.icon)},label:"p-menuitem-text",submenuicon:"p-panelmenu-icon",action:function(e){return c("p-menuitem-link",{"p-disabled":e.item.disabled})},menuitem:function(e){return c("p-menuitem",e.item.className)},menu:"p-submenu-list",submenu:"p-submenu-list",transition:"p-toggleable-content"},styles:"\n@layer primereact {\n    .p-panelmenu .p-panelmenu-header-link {\n        display: flex;\n        align-items: center;\n        user-select: none;\n        cursor: pointer;\n        position: relative;\n        text-decoration: none;\n    }\n    \n    .p-panelmenu .p-panelmenu-header-link:focus {\n        z-index: 1;\n    }\n    \n    .p-panelmenu .p-submenu-list {\n        margin: 0;\n        padding: 0;\n        list-style: none;\n    }\n    \n    .p-panelmenu .p-menuitem-link {\n        display: flex;\n        align-items: center;\n        user-select: none;\n        cursor: pointer;\n        text-decoration: none;\n    }\n    \n    .p-panelmenu .p-menuitem-text {\n        line-height: 1;\n    }\n}\n"}});function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach((function(n){g(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var A=e.memo((function(n){var t=w(e.useState(null),2),r=t[0],o=t[1],f=n.ptm,b=n.cx,y=function(e,t){return f(e,D({hostName:n.hostName},t))},v=function(e,n){return y(n,{context:{active:O(e)}})},g=function(){if(n.model){if(n.multiple)return n.model.filter((function(e){return e.expanded}));var e=null;return n.model.forEach((function(n){n.expanded&&(e?n.expanded=!1:e=n)})),e}return null},h=function(e,t){if(t.disabled)e.preventDefault();else{t.url||e.preventDefault(),t.command&&t.command({originalEvent:e,item:t});var a=r;O(t)?(t.expanded=!1,o(n.multiple?a.filter((function(e){return e!==t})):null)):(!n.multiple&&a&&(a.expanded=!1),t.expanded=!0,o(n.multiple?[].concat(j(a||[]),[t]):t))}},O=function(e){return r&&(n.multiple?r.indexOf(e)>-1:r===e)};i((function(){o(g())}));var x=function(t){var r=n.id+"_sep_"+t,a=m({id:r,key:r,className:b("separator"),role:"separator"},y("separator"));return e.createElement("li",a)},E=function(t,r,i){var o=e.createRef(),l=m({className:b("toggleableContent",{active:r})},y("toggleableContent"));if(t.items){var u=m({classNames:b("transition"),timeout:{enter:1e3,exit:450},in:r,unmountOnExit:!0},y("transition"));return e.createElement(a,d({nodeRef:o},u),e.createElement("div",d({ref:o},l),e.createElement(A,{id:n.id+"_"+i,menuProps:n.menuProps,model:t.items,multiple:n.multiple,submenuIcon:n.submenuIcon,ptm:f,cx:b})))}return null},N=function(t,r){if(!1===t.visible)return null;var a=t.id||n.id+"_"+r,i=O(t),o=c("p-menuitem-link",{"p-disabled":t.disabled}),f=c("p-menuitem-icon",t.icon),d=m({className:b("icon",{item:t})},v(t,"icon")),y=s.getJSXIcon(t.icon,D({},d),{props:n.menuProps}),g=m({className:b("label")},v(t,"label")),x=t.label&&e.createElement("span",g,t.label),N=m({className:b("submenuicon")},v(t,"submenuicon")),j=t.items&&s.getJSXIcon(i?n.submenuIcon||e.createElement(l,N):n.submenuIcon||e.createElement(u,N)),S=E(t,i,r),P=m({href:t.url||"#",className:b("action",{item:t}),target:t.target,onClick:function(e){return h(e,t)},role:"menuitem","aria-disabled":t.disabled},v(t,"action")),I=e.createElement("a",P,j,y,x);t.template&&(I=p.getJSXElement(t.template,t,{onClick:function(e){return h(e,t)},className:o,labelClassName:"p-menuitem-text",iconClassName:f,submenuIconClassName:"p-panelmenu-icon",element:I,props:n,leaf:!t.items,active:i}));var w=m({key:a,id:a,className:b("menuitem",{item:t}),style:t.style,role:"none"},v(t,"menuitem"));return e.createElement("li",w,I,S)},S=n.model?n.model.map((function(e,n){return e.separator?x(n):N(e,n)})):null,P=n.root?"menu":"submenu",I=m({className:c(b(P),n.className),role:"tree"},f(P));return e.createElement("ul",I,S)}));function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function J(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){g(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}A.displayName="PanelMenuSub";var M=e.memo(e.forwardRef((function(t,b){var y=e.useContext(n),v=C.getProps(t,y),g=w(e.useState(v.id),2),h=g[0],O=g[1],x=w(e.useState(null),2),E=x[0],N=x[1],S=w(e.useState(!1),2),P=S[0],I=S[1],k=e.useRef(null),D=h+"_header",_=h+"_content",M=C.setMetaData({props:v,state:{id:h,activeItem:E,animationDisabled:P}}),R=M.ptm,X=M.cx;r(C.css.styles,M.isUnstyled,{name:"panelmenu"});var T=function(){if(v.model){if(v.multiple)return v.model.filter((function(e){return e.expanded}));var e=null;return v.model.forEach((function(n){n.expanded&&(e?n.expanded=!1:e=n)})),e}return null},L=function(e,n){if(n.disabled)e.preventDefault();else{n.url||e.preventDefault(),n.command&&n.command({originalEvent:e,item:n});var t=E;U(n)?(n.expanded=!1,N(v.multiple?t.filter((function(e){return e!==n})):null)):(!v.multiple&&t&&(t.expanded=!1),n.items&&(n.expanded=!0,N(v.multiple?[].concat(j(t||[]),[n]):n)))}},U=function(e){return E&&(v.multiple?E.indexOf(e)>-1:E===e)},z=function(e,n){return R(n,{context:{active:U(e)}})};e.useImperativeHandle(b,(function(){return{props:v,getElement:function(){return k.current}}})),i((function(){h||O(f()),N(T())})),o((function(){I(!0),N(T())}),[v.model]);var H=function(){I(!1)},Y=v.model?v.model.map((function(n,t){if(!1===n.visible)return null;var r=n.id||h+"_"+t,i=U(n),o=c("p-menuitem-icon",n.icon),f=m({className:X("headerIcon",{item:n})},z(n,"headerIcon")),b=s.getJSXIcon(n.icon,J({},f),{props:v}),y=m({className:X("headerSubmenuIcon")},z(n,"headerSubmenuIcon")),g=n.items&&s.getJSXIcon(i?v.submenuIcon||e.createElement(l,y):v.submenuIcon||e.createElement(u,y)),O=m({className:X("headerLabel")},z(n,"headerLabel")),x=n.label&&e.createElement("span",O,n.label),E=e.createRef(),N=m({href:n.url||"#",className:X("headerAction"),onClick:function(e){return L(e,n)},"aria-expanded":i,id:D,"aria-controls":_,"aria-disabled":n.disabled},z(n,"headerAction")),j=e.createElement("a",N,g,b,x);n.template&&(j=p.getJSXElement(n.template,n,{onClick:function(e){return L(e,n)},className:"p-panelmenu-header-link",labelClassName:"p-menuitem-text",submenuIconClassName:"p-panelmenu-icon",iconClassName:o,element:j,props:v,leaf:!n.items,active:i}));var S=m({key:r,className:X("panel",{item:n}),style:n.style},z(n,"panel")),I=m({className:X("header",{active:i,item:n}),style:n.style},z(n,"header")),w=m({className:X("menuContent")},z(n,"menuContent")),C=m({className:X("toggleableContent",{active:i}),role:"region","aria-labelledby":D},z(n,"toggleableContent")),k=m({classNames:X("transition"),timeout:{enter:1e3,exit:450},onEnter:H,disabled:P,in:i,unmountOnExit:!0,options:v.transitionOptions},z(n,"transition"));return e.createElement("div",S,e.createElement("div",I,j),e.createElement(a,d({nodeRef:E},k),e.createElement("div",d({id:_,ref:E},C),e.createElement("div",w,e.createElement(A,{hostName:"PanelMenu",id:r,menuProps:v,model:n.items,className:"p-panelmenu-root-submenu",multiple:v.multiple,submenuIcon:v.submenuIcon,root:!0,ptm:R,cx:X})))))})):null,$=m({className:X("root"),style:v.style},C.getOtherProps(v),R("root"));return e.createElement("div",d({id:v.id,ref:k},$),Y)})));M.displayName="PanelMenu";export{M as PanelMenu};
