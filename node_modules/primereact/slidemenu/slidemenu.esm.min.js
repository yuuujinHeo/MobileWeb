import*as e from"react";import n,{PrimeReactContext as t}from"primereact/api";import{ComponentBase as r,useHandleStyle as o}from"primereact/componentbase";import{CSSTransition as i}from"primereact/csstransition";import{useOverlayListener as u,useMountEffect as a,useUpdateEffect as l,useUnmountEffect as c}from"primereact/hooks";import{ChevronLeftIcon as s}from"primereact/icons/chevronleft";import{OverlayService as m}from"primereact/overlayservice";import{Portal as p}from"primereact/portal";import{classNames as f,mergeProps as d,IconUtils as v,ObjectUtils as b,DomHandler as y,UniqueComponentId as g,ZIndexUtils as h}from"primereact/utils";import{AngleRightIcon as w}from"primereact/icons/angleright";function O(){return O=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},O.apply(this,arguments)}function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function x(e,n){if("object"!==E(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function S(e){var n=x(e,"string");return"symbol"===E(n)?n:String(n)}function P(e,n,t){return(n=S(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function N(e){if(Array.isArray(e))return e}function j(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i,u,a=[],l=!0,c=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=i.call(t)).done)&&(a.push(r.value),a.length!==n);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(c)throw o}}return a}}function I(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function k(e,n){if(e){if("string"==typeof e)return I(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?I(e,n):void 0}}function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function T(e,n){return N(e)||j(e,n)||k(e,n)||D()}var A=r.extend({defaultProps:{__TYPE:"SlideMenu",appendTo:null,autoZIndex:!0,backIcon:null,backLabel:"Back",baseZIndex:0,className:null,easing:"ease-out",effectDuration:250,id:null,menuWidth:190,model:null,onHide:null,onShow:null,onNavigate:null,popup:!1,style:null,submenuIcon:null,transitionOptions:null,viewportHeight:175,children:void 0,closeOnEscape:!0},css:{classes:{previousIcon:"p-slidemenu-backward-icon",previous:function(e){var n=e.levelState;return f("p-slidemenu-backward",{"p-hidden-space":0===n,"p-slidemenu-separator":n>0})},root:function(e){var n=e.props;return f("p-slidemenu p-component",{"p-slidemenu-overlay":n.popup},n.className)},wrapper:"p-slidemenu-wrapper",content:"p-slidemenu-content",separator:"p-slidemenu-separator",icon:"p-menuitem-icon",submenuIcon:"p-submenu-icon",label:"p-menuitem-text",action:"p-menuitem-link",menu:function(e){var n=e.subProps;return f({"p-slidemenu-rootlist":n.root,"p-submenu-list":!n.root,"p-active-submenu":n.parentActive})},menuitem:function(e){var n=e.item;return f("p-menuitem",{"p-menuitem-active":e.active,"p-disabled":n.disabled},n.className)},transition:"p-connected-overlay"},styles:"\n@layer primereact {\n    .p-slidemenu {\n        width: 12.5em;\n    }\n    \n    .p-slidemenu.p-slidemenu-overlay {\n        position: absolute;\n    }\n    \n    .p-slidemenu .p-menu-separator {\n        border-width: 1px 0 0 0;\n    }\n    \n    .p-slidemenu ul {\n        list-style: none;\n        margin: 0;\n        padding: 0;\n    }\n    \n    .p-slidemenu .p-slidemenu-rootlist {\n        position: absolute;\n        top: 0;\n    }\n    \n    .p-slidemenu .p-submenu-list {\n        display: none;\n        position: absolute;\n        top: 0;\n        width: 12.5em;\n    }\n    \n    .p-slidemenu .p-menuitem-link {\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        text-decoration: none;\n        overflow: hidden;\n    }\n    \n    .p-slidemenu .p-menuitem-icon {\n        vertical-align: middle;\n    }\n    \n    .p-slidemenu .p-menuitem-text {\n        vertical-align: middle;\n    }\n    \n    .p-slidemenu .p-menuitem {\n        position: relative;\n    }\n    \n    .p-slidemenu .p-menuitem-link .p-submenu-icon {\n        margin-left: auto;\n    }\n    \n    .p-slidemenu .p-slidemenu-wrapper {\n        position: relative;\n    }\n    \n    .p-slidemenu .p-slidemenu-content {\n        overflow-x: hidden;\n        overflow-y: auto;\n        position: relative;\n        height: 100%;\n    }\n    \n    .p-slidemenu-backward {\n        bottom: 0;\n        width: 100%;\n        padding: 0.25em;\n        cursor: pointer;\n    }\n    \n    .p-slidemenu-backward .p-slidemenu-backward-icon {\n        vertical-align: middle;\n    }\n    \n    .p-slidemenu-backward span {\n        vertical-align: middle;\n    }\n    \n    .p-slidemenu .p-menuitem-active {\n        position: static;\n    }\n    \n    .p-slidemenu .p-menuitem-active > .p-submenu-list {\n        display: block;\n    }\n}\n",inlineStyles:{menu:function(e){var n=e.subProps;return{width:n.menuWidth+"px",left:n.root?-1*n.level*n.menuWidth+"px":n.menuWidth+"px",transitionProperty:n.root?"left":"none",transitionDuration:n.effectDuration+"ms",transitionTimingFunction:n.easing}}}}});function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function R(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){P(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var W=e.memo((function(n){var t=T(e.useState(null),2),r=t[0],o=t[1],i=T(e.useState({}),2),u=i[0],a=i[1],l=n.ptm,c=n.cx,s=n.sx,m=function(e,t){return l(t,{hostName:n.hostName,context:{active:r===e}})},p=function(e,t,r){if(t.disabled)e.preventDefault();else if(t.url||e.preventDefault(),t.command&&t.command({originalEvent:e,item:t}),t.items){var i=h(t,r);a(R(R({},u),{},P({},i,!0))),o(t),n.onForward()}},y=function(t){var r=n.id+"_sep_"+t,o=d({id:r,key:r,className:c("separator"),role:"separator"},l("separator",{hostName:n.hostName}));return e.createElement("li",o)},g=function(t,o){var i=u[h(t,o)];return t.items&&i?e.createElement(W,{id:n.id+"_"+o,menuProps:n.menuProps,model:t.items,index:n.index+1,menuWidth:n.menuWidth,effectDuration:n.effectDuration,onForward:n.onForward,parentActive:t===r,submenuIcon:n.submenuIcon,ptm:l,cx:c,sx:s}):null},h=function(e,t){return e.id||n.id+"_"+t},O=function(t,o){if(!1===t.visible)return null;var i=h(t,o),u=r===t,a=f("p-menuitem-icon",t.icon),l=d({className:c("icon")},m(t,"icon")),s=v.getJSXIcon(t.icon,R({},l),{props:n.menuProps}),y=d({className:c("submenuIcon")},m(t,"submenuIcon")),O=d({className:c("label")},m(t,"label")),E=t.items&&v.getJSXIcon(n.submenuIcon||e.createElement(w,y),R({},y),{props:n}),x=t.label&&e.createElement("span",O,t.label),S=g(t,o),P=d({href:t.url||"#",className:c("action"),target:t.target,onClick:function(e){return p(e,t,o)},"aria-disabled":t.disabled},m(t,"action")),N=e.createElement("a",P,s,x,E);t.template&&(N=b.getJSXElement(t.template,t,{onClick:function(e){return p(e,t,o)},className:"p-menuitem-link",labelClassName:"p-menuitem-text",iconClassName:a,submenuIconClassName:"p-submenu-icon",element:N,props:n,active:u}));var j=d({id:i,key:i,className:c("menuitem",{active:u,item:t}),style:t.style},m(t,"menuitem"));return e.createElement("li",j,N,S)},E=n.model?n.model.map((function(e,n){return e.separator?y(n):O(e,n)})):null,x=d({className:c("menu",{subProps:n}),style:s("menu",{subProps:n})},l("menu",{hostName:n.hostName}));return e.createElement("ul",x,E)}));W.displayName="SlideMenuSub";var F=function(n){var t,r,o,i=n.target,u=void 0===i?"document":i,a=n.type,l=n.listener,c=n.options,s=n.when,m=void 0===s||s,p=e.useRef(null),f=e.useRef(null),d=(t=c,r=e.useRef(void 0),e.useEffect((function(){r.current=t})),r.current),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b.isNotEmpty(e.target)&&(g(),(e.when||m)&&(p.current=y.getTargetElement(e.target))),!f.current&&p.current&&(f.current=function(e){return l&&l(e)},p.current.addEventListener(a,f.current,c))},g=function(){f.current&&(p.current.removeEventListener(a,f.current,c),f.current=null)};return e.useEffect((function(){m?p.current=y.getTargetElement(u):(g(),p.current=null)}),[u,m]),e.useEffect((function(){!f.current||f.current===l&&d===c||(g(),m&&v())}),[l,c]),o=function(){g()},e.useEffect((function(){return o}),[]),[v,g]},H=function(n,t,r){var o=T(F({type:"keydown",listener:function(e){"Esc"!==e.key&&"Escape"!==e.key||(e.stopImmediatePropagation(),r(e))}}),2),i=o[0],u=o[1];return e.useEffect((function(){if(t&&n.current)return i(),function(){u()}})),[n,r]};function L(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function M(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?L(Object(t),!0).forEach((function(n){P(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Z=e.memo(e.forwardRef((function(r,f){var b=e.useContext(t),w=A.getProps(r,b),E=T(e.useState(w.id),2),x=E[0],S=E[1],P=T(e.useState(0),2),N=P[0],j=P[1],I=T(e.useState(!1),2),k=I[0],D=I[1],C=A.setMetaData({props:w,state:{id:x,visible:k,level:N}}),R=C.ptm,F=C.cx,L=C.sx;o(A.css.styles,C.isUnstyled,{name:"slidemenu"});var Z=e.useRef(null),_=e.useRef(null),J=e.useRef(null),X=e.useRef(null);H(_,w.popup&&w.closeOnEscape,(function(e){K(e)}));var U=T(u({target:_,overlay:Z,listener:function(e,n){n.valid&&K(e)},when:k}),2),z=U[0],B=U[1],Y=function(){j((function(e){return e+1}))},$=function(){j((function(e){return e-1}))},q=function(e){w.popup&&(k?K(e):G(e))},G=function(e){_.current=e.currentTarget,D(!0),w.onShow&&w.onShow(e)},K=function(e){_.current=e.currentTarget,D(!1),w.onHide&&w.onHide(e)},Q=function(){w.autoZIndex&&h.set("menu",Z.current,b&&b.autoZIndex||n.autoZIndex,w.baseZIndex||b&&b.zIndex.menu||n.zIndex.menu),y.addStyles(Z.current,{position:"absolute",top:"0",left:"0"}),y.absolutePosition(Z.current,_.current)},V=function(){z()},ee=function(){_.current=null,B()},ne=function(){h.clear(Z.current),j(0)};a((function(){x||S(g())})),l((function(){j(0)}),[w.model]),l((function(){w.onNavigate&&w.onNavigate({level:N})}),[N]),c((function(){h.clear(Z.current)})),e.useImperativeHandle(f,(function(){return{props:w,toggle:q,show:G,hide:K,navigateForward:Y,navigateBack:$,setLevelState:j,getElement:function(){return Z.current}}}));var te=function(){var n=d({className:F("previousIcon")},R("previousIcon")),t=v.getJSXIcon(w.backIcon||e.createElement(s,n),M({},n),{props:w}),r=d(R("previousLabel")),o=d({ref:J,className:F("previous",{levelState:N}),onClick:function(e){return $()}},R("previous"));return e.createElement("div",o,t,e.createElement("span",r,w.backLabel))},re=function(){var n={height:w.viewportHeight+"px"},t=te(),r=d({ref:Z,id:w.id,className:F("root"),style:w.style,onClick:function(e){return n=e,void(w.popup&&m.emit("overlay-click",{originalEvent:n,target:_.current}));var n}},A.getOtherProps(w),R("root")),o=d({className:F("wrapper"),style:n},R("wrapper")),u=d({ref:X,className:F("content")},R("content")),a=d({classNames:F("transition"),in:!w.popup||k,timeout:{enter:120,exit:100},options:w.transitionOptions,unmountOnExit:!0,onEnter:Q,onEntered:V,onExit:ee,onExited:ne},R("transition"));return e.createElement(i,O({nodeRef:Z},a),e.createElement("div",r,e.createElement("div",o,e.createElement("div",u,e.createElement(W,{id:x,hostName:"SlideMenu",menuProps:w,model:w.model,root:!0,index:0,menuWidth:w.menuWidth,effectDuration:w.effectDuration,level:N,parentActive:0===N,onForward:Y,submenuIcon:w.submenuIcon,ptm:R,cx:F,sx:L}))),t))}();return w.popup?e.createElement(p,{element:re,appendTo:w.appendTo}):re})));Z.displayName="SlideMenu";export{Z as SlideMenu};
